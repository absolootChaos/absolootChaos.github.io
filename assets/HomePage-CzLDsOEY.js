import{T as Je}from"./Leaderboard-BpvEDDg7.js";import{d as xe,r as b,c as K,o as Te,a as we,b as d,e as Se,f as e,F as O,g as oe,h as ie,n as ue,t as w,i as L,j as u,_ as Pe,w as Fe,k as q,v as le,l as Ne,m as ht,p as me,q as Re,s as Ze,T as gt,u as yt,x as Qe}from"./index-D2YvvBIt.js";const wt={class:"rules-page"},bt={class:"layout"},kt={class:"side"},_t={class:"nav-card"},$t=["onClick"],St={class:"nav-text"},Ct={class:"content"},xt=["id"],Tt={class:"card-head"},Pt={class:"card-titles"},Nt={class:"card-title"},Et={key:0,class:"card-note"},At={key:0,class:"card-body"},Mt={class:"bullets"},Dt={key:1,class:"subsections"},Rt={class:"sub-title"},It={class:"bullets"},Lt=xe({__name:"Rules",setup(n){const a=[{id:"intro",title:"Introduction",items:["Welcome Rando Racers! We are Pleased to Announce an event that may make Ringus seem competitive: ABSOLOOT CHAOS","ABSOLOOT CHAOS is a 2v2 DLC Rando Event which will take place over the following 4 weeks.","Each Week, teams will be asked to do 2 seed by the given deadline and submit to see who lands on top","However, these 8 Seeds are not just any rando seeds, as each see will have a unique twist for you and your teammate to maneuver through.","Some Seeds the twist will be said in the description of a seeds release.","While Other seeds will have you and your teammate routing on the fly to newly given circumstances","The Goal is to enjoy the Chaos and have some fun"]},{id:"general",title:"General Rules",items:["These are the general rules for this event and are intended to align all players on how 2v2 DLC Randomizer is played.","Always review any seed-specific changes provided for your match. If no special rules are listed for a seed, default to the rules below.","The Goal is to kill the PCR Replacement, you can quit out once you've seen the `ENEMY FELLED` equivalent"]},{id:"submissions",title:"Submissions & Deadlines",items:["Teams must submit their times on both seeds before the set deadline listed that week."]},{id:"starting-conditions",title:"Starting Conditions",items:["Enough runes to reach Level 60","Crimson and Cerulean Flasks at +12","All Whetblades","All Talisman Pouches","All Crafting Recipes unlocked (if you have the materials, you can craft the item)","All Upgrade Bell Bearings (Smithing and Somber Stones available from Twin Maiden Husks at Roundtable Hold)","Smithing Stone cost reduced: 1 stone per upgrade or 3 stones per tier","All Spell Shops are fully randomized (any vendor, including Ymir, may sell powerful or key items)","Torrent is not scared in Abyssal Woods and can be used to reach Midra"]},{id:"progression",title:"DLC Progression & Key Items",items:["Teams will have to find the required Amount of Unique Messmer's Kindling Shards per seed. This should be in the description of the seed.","Each individual player will need a minimum amount of Messmer's Kindling Shards to get into Enir-Ilim. This should be in the description of the seed","Scadutree Fragments and Golden Seeds can only be obtained from Key Item checks.","Key Item checks include: 4 Overworld Checks and 31 Boss Checks (excluding Consort).","Revered Spirit Ashes are not randomized and remain in their vanilla locations."],subsections:[{title:"Overworld Key Item Checks (4)",items:["Oâ€™ Mother Emote â€” Bonny Village","Hole-Laden Necklace â€” obtained by speaking to Ymir","Ensis Imbued Sword Key â€” Castle Ensis","Belurat Sewer Key â€” Belurat"]},{title:"Boss Key Item Checks (31) Not Including PCR",items:["Solitary Knight - Western Nameless Mausoleum","Ghostflame Dragon - Gravesite Plains","Divine Beast Dancing Lion - Belurat","Ancient Dragon Man","Rellana","Ralva, The Great Red Bear","Golden Hippo","Scadutree Avatar","Messmer the Impaler","Commander Gauis","Black Knight Edredd - Fort of Reprimand","Ghostflame Dragon - Outside Reprimand","Black Knight Garrew - Inside Fog Rift Fort","Red Bear NPC - Northern Nameless Mausoleum","Rugalea in Rauh Base","Tree Sentinel 1 - Hinterlands","Tree Sentinel 2 - Hinterlands","Fallingstar Beast - Hinterlands","Ghostflame Dragon w/ Adds - Cerulean Coast","Dancer - Southern Nameless Mausoleum","Putrescent Knight","Death Rite Bird - Charos Hidden Grave","Jagged Peak Drake 1","Dueling Drakes","Ancient Dragon Senessax","Bayle the Dread","Rakshasa - Eastern Nameless Mausoleum","Jori, Elder Inquisitor","Midra, Lord of Frenzy Flame","Deathblight Dancing Lion","Romina, Saint of the Bud"]}]},{id:"seed-setup",title:"Seed Setup & Tools",items:["Extract the Randomizer seed files anywhere on your desktop.","Launch the seed using launchmod_rando.bat.","All seeds include a custom overlay (designed by Psiphicode) that displays boss checks and indicates which checks may contain Messmer Kindling Shards.","LiveSplit is allowed."]},{id:"team-restrictions",title:"Team Restrictions",items:["One Player on a Team must kill the Messmer Replacement before ending the race.","You Must have all Unique Shards Required to Enter and kill the PCR Replacement","Both players on a team must start with different starting classes.","Both players must use different primary weapons for the race."],subsections:[{title:"What is a Primary Weapon?",items:["A Primary Weapon is a weapon that has been used to kill a boss."]}]},{id:"quitouts",title:"Quit-Out Rules",items:["Quit-outs are allowed under normal circumstances.","A Player is allowed quit-outs indefinetely if there is only one remaining check left.","If a player quits out for more than 15 seconds while more than one check remains, their teammate must also quit out."],subsections:[{title:"Exception",items:["If the teammate is currently in a boss fight, they may finish the fight.","They must quit out immediately afterward if the original player is still quit out."]}]},{id:"skips",title:"Skips & Movement Rules",items:["Front-to-Back Skip is allowed."],subsections:[{title:"Stake Skips",items:["No intentional stake skips are allowed.","If you fail the jump down to Messmer or to Belurat from Enir-Ilim, taking the stake is allowed as long as a legitimate first attempt was clearly made."]}]}],r=b(a[0]?.id??"general");function f(C){const S=document.getElementById(C);S&&S.scrollIntoView({behavior:"smooth",block:"start"})}const E=K(()=>a.map(C=>C.id));function P(){let S=r.value,p=-1/0;for(const R of E.value){const I=document.getElementById(R);if(!I)continue;const N=I.getBoundingClientRect().top-120;N<=0&&N>p&&(p=N,S=R)}r.value=S}return Te(()=>{window.addEventListener("scroll",P,{passive:!0}),P()}),we(()=>{window.removeEventListener("scroll",P)}),(C,S)=>(u(),d("div",wt,[S[2]||(S[2]=Se('<header class="hero" data-v-6a8ff43d><div class="gridlines" aria-hidden="true" data-v-6a8ff43d></div><div class="speed-sweep" aria-hidden="true" data-v-6a8ff43d></div><div class="hero-inner" data-v-6a8ff43d><div class="badge" data-v-6a8ff43d>Absoloot Chaos</div><h1 class="title" data-v-6a8ff43d>Event Rules</h1><p class="subtitle" data-v-6a8ff43d> Seed-specific notes override these rules. If no seed notes are provided, follow this page. </p></div></header>',1)),e("div",bt,[e("aside",kt,[e("div",_t,[S[0]||(S[0]=e("div",{class:"nav-title"},"Contents",-1)),(u(),d(O,null,oe(a,p=>e("button",{key:p.id,class:ue(["nav-link",{active:r.value===p.id}]),onClick:R=>f(p.id),type:"button"},[e("span",St,w(p.title),1)],10,$t)),64)),S[1]||(S[1]=e("div",{class:"nav-foot"},[e("div",{class:"tiny"},[ie(" Tip: Use "),e("kbd",null,"Ctrl"),ie(" + "),e("kbd",null,"F"),ie(" to quickly find a rule. ")])],-1))])]),e("main",Ct,[(u(),d(O,null,oe(a,p=>e("section",{key:p.id,class:"card",id:p.id},[e("header",Tt,[e("div",Pt,[e("h2",Nt,w(p.title),1),p.note?(u(),d("p",Et,w(p.note),1)):L("",!0)])]),p.items?.length?(u(),d("div",At,[e("ul",Mt,[(u(!0),d(O,null,oe(p.items,(R,I)=>(u(),d("li",{key:I},w(R),1))),128))])])):L("",!0),p.subsections?.length?(u(),d("div",Dt,[(u(!0),d(O,null,oe(p.subsections,(R,I)=>(u(),d("div",{key:I,class:"subcard"},[e("h3",Rt,w(R.title),1),e("ul",It,[(u(!0),d(O,null,oe(R.items,(Y,N)=>(u(),d("li",{key:N},w(Y),1))),128))])]))),128))])):L("",!0)],8,xt)),64))])])]))}}),Ot=Pe(Lt,[["__scopeId","data-v-6a8ff43d"]]),Bt={class:"seed-wrap"},Ut={class:"seed-header"},Vt={class:"seed-controls"},Ft=["onClick"],zt={key:0,class:"panel"},Yt={key:1},Wt={class:"panel week-head"},Kt={class:"week-left"},jt={class:"seed-meta"},qt={class:"seed-grid"},Xt={class:"seed-card-top"},Gt={class:"seed-card-title"},Ht={class:"badges"},Jt={class:"panel"},Zt={class:"status-grid"},Qt={class:"status-item"},ea={class:"status-value"},ta={class:"status-sub"},aa={class:"status-item"},sa={class:"status-value"},na={class:"panel"},la={key:0,class:"desc"},oa={key:1,class:"locked"},ia={class:"hint",style:{display:"block","margin-top":"6px"}},ra={class:"panel actions-row"},da={class:"action-col"},ua=["href"],ca={class:"hint"},va={class:"action-col"},ma=["onClick"],fa={class:"hint"},pa={class:"modal"},ha={class:"modal-head"},ga={key:0,class:"modal-sub"},ya={key:0,class:"status error"},wa={key:1,class:"status ok"},ba={class:"form-grid"},ka={class:"field full"},_a={class:"field"},$a={class:"field"},Sa={class:"field"},Ca={class:"field"},xa={class:"field"},Ta={class:"field"},Pa={class:"field"},Na={class:"field"},Ea={class:"modal-actions"},Aa=["disabled"],Ma={key:0},Da={key:1},Ra="https://script.google.com/macros/s/AKfycbyJK333jg0bfKs67jGiRw4r-gxjj5ElrIO-tygb8YYoX0gYbxyosAHt8qoFafZYWVM/exec",Ia=xe({__name:"DownloadSeeds",setup(n){const a=b(null),r=b("all"),f=b(new Date);let E=null;Te(async()=>{const $=await fetch("/data/releases.json",{cache:"no-store"});a.value=await $.json(),a.value&&(r.value=m(a.value)),E=window.setInterval(()=>{f.value=new Date},1e3)}),we(()=>{E&&window.clearInterval(E)});function P($){const t=new Date($);return Number.isNaN(t.getTime())?new Date(0):t}function C($,t){return $===!0?!0:$===!1?!1:f.value.getTime()>=P(t).getTime()}function S($){const t=P($);return t.getTime()===0?"Unknown time":t.toLocaleString(void 0,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}function p($){const t=P($).getTime();return t===0?0:Math.max(0,t-f.value.getTime())}function R($){if($<=0)return"00:00:00";const t=Math.floor($/1e3),i=Math.floor(t/86400),v=Math.floor(t%86400/3600),T=Math.floor(t%3600/60),h=t%60,A=String(v).padStart(2,"0"),k=String(T).padStart(2,"0"),H=String(h).padStart(2,"0");return i>0?`${i}d ${A}:${k}:${H}`:`${A}:${k}:${H}`}function I($){const t=P($).getTime();return t===0?!1:f.value.getTime()>=t}const Y=K(()=>a.value?r.value==="all"?a.value.weeks:a.value.weeks.filter($=>$.week===r.value):[]);function N($){r.value=$}function m($){const t=[...$.weeks||[]].sort((v,T)=>T.week-v.week),i=t.find(v=>v.seeds?.some(T=>C(T.releases.forceDownload,T.releases.downloadAt)));return i?i.week:t[0]?.week??"all"}function M($){const t=C($.releases.forceDownload,$.releases.downloadAt),i=!I($.deadlineAt);return t&&i}const ee=b(!1),U=b(null),re=b(""),se=b(""),te=b(""),J=b(null),D=b(null),F=b(""),_=b(""),c=b(null),g=b(null),B=b(!1),V=b(""),y=b("");function Z($,t){U.value={week:$,seed:t},ee.value=!0,V.value="",y.value=""}function ne(){ee.value=!1,U.value=null,V.value="",y.value="",B.value=!1,re.value="",se.value="",te.value="",J.value=null,D.value=null,F.value="",_.value="",c.value=null,g.value=null}function Q($){if($==null||$==="")return null;const t=Number($);return Number.isFinite(t)?Math.max(0,Math.floor(t)):null}const z=K(()=>!U.value||!M(U.value.seed)?!1:re.value.trim().length>0&&se.value.trim().length>0&&te.value.trim().length>0&&Q(J.value)!==null&&Q(D.value)!==null&&F.value.trim().length>0&&_.value.trim().length>0&&Q(c.value)!==null&&Q(g.value)!==null&&!B.value);async function he(){if(V.value="",y.value="",!U.value){V.value="No seed selected.";return}if(!z.value){V.value="Please fill all fields.";return}B.value=!0;try{const $={week:U.value.week,seedId:U.value.seed.id,seedTitle:U.value.seed.title,teamName:re.value.trim(),p1Name:se.value.trim(),p1Time:te.value.trim(),p1Kills:Q(J.value),p1Deaths:Q(D.value),p2Name:F.value.trim(),p2Time:_.value.trim(),p2Kills:Q(c.value),p2Deaths:Q(g.value)},i=await(await fetch(Ra,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify($)})).json();if(!i?.ok)throw new Error(i?.error||"Submission failed");y.value="âœ… Submitted! Thanks."}catch($){V.value=`âŒ ${$?.message||"Submission failed"}`}finally{B.value=!1}}return($,t)=>(u(),d("div",Bt,[e("header",Ut,[t[10]||(t[10]=e("div",{class:"seed-title"},[e("h2",null,"Seed Releases"),e("p",{class:"seed-sub"}," Rules unlock first. Download unlocks later. Submit runs directly on the site once download is available. ")],-1)),e("div",Vt,[(u(!0),d(O,null,oe(a.value?.weeks||[],i=>(u(),d("button",{key:i.week,class:ue(["chip",{active:r.value===i.week}]),onClick:v=>N(i.week)}," Week "+w(i.week),11,Ft))),128)),e("button",{class:ue(["chip",{active:r.value==="all"}]),onClick:t[0]||(t[0]=i=>N("all"))}," All Weeks ",2)])]),a.value?(u(),d("div",Yt,[(u(!0),d(O,null,oe(Y.value,i=>(u(),d("section",{key:i.week,style:{"margin-top":"16px"}},[e("div",Wt,[e("div",Kt,[t[11]||(t[11]=e("span",{class:"dot"},null,-1)),e("strong",null,"Week "+w(i.week),1)]),e("span",jt,w(i.seeds.length)+" seeds",1)]),e("div",qt,[(u(!0),d(O,null,oe(i.seeds,v=>(u(),d("article",{key:v.id,class:"seed-card"},[e("div",Xt,[e("div",null,[e("h4",Gt,w(v.title),1)]),e("div",Ht,[e("span",{class:ue(["badge",{on:C(v.releases.forceDescription,v.releases.descriptionAt)}])}," Description ",2),e("span",{class:ue(["badge",{on:C(v.releases.forceDownload,v.releases.downloadAt)}])}," Download ",2)])]),e("div",Jt,[e("div",Zt,[e("div",Qt,[t[12]||(t[12]=e("div",{class:"status-label"},"Download Unlock",-1)),e("div",ea,[e("strong",null,w(S(v.releases.downloadAt)),1)]),e("div",ta,[C(v.releases.forceDownload,v.releases.downloadAt)?(u(),d(O,{key:0},[ie(" âœ… Download available ")],64)):(u(),d(O,{key:1},[ie(" â³ "+w(R(p(v.releases.downloadAt)))+" remaining ",1)],64))])]),e("div",aa,[t[13]||(t[13]=e("div",{class:"status-label"},"Seed Deadline",-1)),e("div",sa,[e("strong",null,w(S(v.deadlineAt)),1)]),e("div",{class:ue(["status-sub",{danger:I(v.deadlineAt)}])},[I(v.deadlineAt)?(u(),d(O,{key:0},[ie("â›” Deadline passed")],64)):(u(),d(O,{key:1},[ie("â³ "+w(R(p(v.deadlineAt)))+" remaining",1)],64))],2)])])]),e("div",na,[C(v.releases.forceDescription,v.releases.descriptionAt)?(u(),d("div",la,w(v.descriptionText),1)):(u(),d("p",oa,[t[14]||(t[14]=ie(" Description unlocked at ",-1)),e("strong",null,w(S(v.releases.descriptionAt)),1),e("span",ia," â³ "+w(R(p(v.releases.descriptionAt)))+" remaining ",1)]))]),e("div",ra,[e("div",da,[C(v.releases.forceDownload,v.releases.downloadAt)?(u(),d("a",{key:0,class:"btn",href:v.download.url,target:"_blank",rel:"noopener noreferrer"}," â¬‡ï¸ "+w(v.download.label),9,ua)):(u(),d(O,{key:1},[t[15]||(t[15]=e("button",{class:"btn disabled",disabled:""},"â¬‡ï¸ Download locked",-1)),e("p",ca,"Unlocks in "+w(R(p(v.releases.downloadAt))),1)],64))]),e("div",va,[M(v)?(u(),d("button",{key:0,class:"btn submit",onClick:T=>Z(i.week,v)}," ðŸ“ Submit Run ",8,ma)):(u(),d(O,{key:1},[t[16]||(t[16]=e("button",{class:"btn disabled",disabled:""},"ðŸ“ Submit locked",-1)),e("p",fa,[I(v.deadlineAt)?(u(),d(O,{key:0},[ie("Deadline passed.")],64)):(u(),d(O,{key:1},[ie("Unlocks when download is released.")],64))])],64))])])]))),128))])]))),128))])):(u(),d("div",zt," Loading seed releasesâ€¦ ")),ee.value?(u(),d("div",{key:2,class:"modal-backdrop",onClick:Fe(ne,["self"])},[e("div",pa,[e("div",ha,[e("div",null,[t[17]||(t[17]=e("div",{class:"modal-title"},"Submit Run",-1)),U.value?(u(),d("div",ga," Week "+w(U.value.week)+" â€¢ "+w(U.value.seed.title),1)):L("",!0)]),e("button",{class:"x",onClick:ne},"âœ•")]),V.value?(u(),d("div",ya,w(V.value),1)):L("",!0),y.value?(u(),d("div",wa,w(y.value),1)):L("",!0),e("div",ba,[e("div",ka,[t[18]||(t[18]=e("label",null,"Team Name *",-1)),q(e("input",{"onUpdate:modelValue":t[1]||(t[1]=i=>re.value=i),placeholder:"Example: The Crimson Chin"},null,512),[[le,re.value]])]),e("div",_a,[t[19]||(t[19]=e("label",null,"Player 1 Name *",-1)),q(e("input",{"onUpdate:modelValue":t[2]||(t[2]=i=>se.value=i),placeholder:"Player 1"},null,512),[[le,se.value]])]),e("div",$a,[t[20]||(t[20]=e("label",null,"Player 1 Time *",-1)),q(e("input",{"onUpdate:modelValue":t[3]||(t[3]=i=>te.value=i),placeholder:"hh:mm:ss or mm:ss"},null,512),[[le,te.value]])]),e("div",Sa,[t[21]||(t[21]=e("label",null,"P1 Checks *",-1)),q(e("input",{"onUpdate:modelValue":t[4]||(t[4]=i=>J.value=i),type:"number",min:"0",placeholder:"0"},null,512),[[le,J.value,void 0,{number:!0}]])]),e("div",Ca,[t[22]||(t[22]=e("label",null,"P1 Deaths *",-1)),q(e("input",{"onUpdate:modelValue":t[5]||(t[5]=i=>D.value=i),type:"number",min:"0",placeholder:"0"},null,512),[[le,D.value,void 0,{number:!0}]])]),e("div",xa,[t[23]||(t[23]=e("label",null,"Player 2 Name *",-1)),q(e("input",{"onUpdate:modelValue":t[6]||(t[6]=i=>F.value=i),placeholder:"Player 2"},null,512),[[le,F.value]])]),e("div",Ta,[t[24]||(t[24]=e("label",null,"Player 2 Time *",-1)),q(e("input",{"onUpdate:modelValue":t[7]||(t[7]=i=>_.value=i),placeholder:"hh:mm:ss or mm:ss"},null,512),[[le,_.value]])]),e("div",Pa,[t[25]||(t[25]=e("label",null,"P2 Checks *",-1)),q(e("input",{"onUpdate:modelValue":t[8]||(t[8]=i=>c.value=i),type:"number",min:"0",placeholder:"0"},null,512),[[le,c.value,void 0,{number:!0}]])]),e("div",Na,[t[26]||(t[26]=e("label",null,"P2 Deaths *",-1)),q(e("input",{"onUpdate:modelValue":t[9]||(t[9]=i=>g.value=i),type:"number",min:"0",placeholder:"0"},null,512),[[le,g.value,void 0,{number:!0}]])])]),e("div",Ea,[e("button",{class:"btn2 ghost",onClick:ne},"Cancel"),e("button",{class:"btn2 primary",disabled:!z.value,onClick:he},[B.value?(u(),d("span",Da,"Submittingâ€¦")):(u(),d("span",Ma,"Submit"))],8,Aa)])])])):L("",!0)]))}}),et=Pe(Ia,[["__scopeId","data-v-4ed902dc"]]),La={class:"wrap"},Oa={class:"signup-card"},Ba={class:"left"},Ua={class:"grid"},Va={class:"field"},Fa={class:"field"},za={class:"field"},Ya={class:"field"},Wa={class:"field full"},Ka={key:0,class:"status error"},ja={key:1,class:"status ok"},qa={class:"right"},Xa=["disabled"],Ga={key:0},Ha={key:1},Ja={class:"teams-card"},Za={class:"teams-head"},Qa={key:0,class:"mh-sub"},es={key:1,class:"mh-sub"},ts={key:0,class:"empty"},as={key:1,class:"teams-scroll"},ss={class:"team-main"},ns={class:"team-text"},ls={key:0,class:"ts"},os={class:"team-links"},is=["href"],rs=["href"],tt="https://script.google.com/macros/s/AKfycbx5dLXFc2BYN6wmkl31qZvWDwcJLNqOiu82JwVJfW2YyqutX0VosVZPvkxIvCr1ysES/exec",ds=xe({__name:"SignUps",setup(n){const a=b(""),r=b(""),f=b(""),E=b(""),P=b(""),C=b(!1),S=b(""),p=b(""),R=b([]),I=b(!0);let Y=null;function N(_){const c=(_||"").trim();if(!c)return"";const g=/^https?:\/\//i.test(c)?c:`https://${c}`;try{const B=new URL(g);if(B.hostname.toLowerCase().replace(/^www\./,"")!=="twitch.tv")return g;let y=B.pathname||"/";y=y.replace(/^\/+/,"/"),y=y.replace(/^\/(www\.)?twitch\.tv\//i,"/");const Z=y.split("/").filter(Boolean)[0]||"";return Z?`https://twitch.tv/${Z}`:"https://twitch.tv"}catch{return c}}function m(_){const c=(_||"").trim();if(!c)return"";try{const g=new URL(/^https?:\/\//i.test(c)?c:`https://${c}`);if(g.hostname.toLowerCase().replace(/^www\./,"")!=="twitch.tv")return c;const V=g.pathname.split("/").filter(Boolean)[0];return V?`@${V}`:c}catch{return c}}function M(_){return String(_??"").trim().replace(/\s+/g," ")}function ee(_){return M(_).toLowerCase()}function U(_){if(!_)return 0;const g=new Date(_).getTime();return Number.isNaN(g)?0:g}function re(_){const c=ee(_.playerName),g=ee(_.teammateName),B=[c,g].sort().join("|");return`${ee(_.teamName)}::${B}`}function se(_){const c=M(_.playerName)||"Player 1",g=M(_.teammateName)||"Player 2",B=M(_.teamName)||"TEAM";return`${c} & ${g} as "${B}"`}const te=K(()=>M(a.value).length>0&&M(f.value).length>0&&M(P.value).length>0&&!C.value);async function J(){try{I.value=!0;const c=await(await fetch(tt,{method:"GET",cache:"no-store"})).json();if(!c?.ok)throw new Error(c?.error||"Failed to load teams");R.value=c.teams||[]}catch(_){console.error(_)}finally{I.value=!1}}async function D(){if(S.value="",p.value="",!te.value){S.value="Please fill Player Name, Teammate Name, and Team Name.";return}C.value=!0;try{const _={playerName:M(a.value),playerTwitch:N(r.value),teammateName:M(f.value),teammateTwitch:N(E.value),teamName:M(P.value)},g=await(await fetch(tt,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(_)})).json();if(!g?.ok)throw new Error(g?.error||"Submission failed");p.value="âœ… Signed up! Your team should appear below shortly.",a.value="",r.value="",f.value="",E.value="",P.value="",await J()}catch(_){S.value=`âŒ ${_?.message||"Submission failed"}`}finally{C.value=!1}}const F=K(()=>{const _=new Map;for(const c of R.value){const g=M(c.playerName),B=M(c.teammateName),V=M(c.teamName);if(!g||!B||!V)continue;const y=re({...c,playerName:g,teammateName:B,teamName:V}),Z=_.get(y);if(!Z)_.set(y,c);else{const ne=U(Z.timestamp);U(c.timestamp)>=ne&&_.set(y,c)}}return Array.from(_.values()).sort((c,g)=>U(g.timestamp)-U(c.timestamp))});return Te(async()=>{await J(),Y=window.setInterval(J,15e3)}),we(()=>{Y&&window.clearInterval(Y)}),(_,c)=>(u(),d("div",La,[e("div",Oa,[e("div",Ba,[c[10]||(c[10]=e("h2",{class:"title"},"Team Sign Up",-1)),c[11]||(c[11]=e("p",{class:"sub"},"Enter your duo info",-1)),e("div",Ua,[e("div",Va,[c[5]||(c[5]=e("label",null,"Player Name *",-1)),q(e("input",{"onUpdate:modelValue":c[0]||(c[0]=g=>a.value=g),placeholder:"Player 1"},null,512),[[le,a.value]])]),e("div",Fa,[c[6]||(c[6]=e("label",null,"Player Twitch",-1)),q(e("input",{"onUpdate:modelValue":c[1]||(c[1]=g=>r.value=g),placeholder:"Paste your Twitch URL (https://twitch.tv/yourname)"},null,512),[[le,r.value]])]),e("div",za,[c[7]||(c[7]=e("label",null,"Teammate Name *",-1)),q(e("input",{"onUpdate:modelValue":c[2]||(c[2]=g=>f.value=g),placeholder:"Player 2"},null,512),[[le,f.value]])]),e("div",Ya,[c[8]||(c[8]=e("label",null,"Teammate Twitch",-1)),q(e("input",{"onUpdate:modelValue":c[3]||(c[3]=g=>E.value=g),placeholder:"Paste teammate Twitch URL"},null,512),[[le,E.value]])]),e("div",Wa,[c[9]||(c[9]=e("label",null,"Team Name *",-1)),q(e("input",{"onUpdate:modelValue":c[4]||(c[4]=g=>P.value=g),placeholder:"Example: The Crimson Chin"},null,512),[[le,P.value]])])]),S.value?(u(),d("p",Ka,w(S.value),1)):L("",!0),p.value?(u(),d("p",ja,w(p.value),1)):L("",!0)]),e("div",qa,[e("button",{class:ue(["btn",{loading:C.value}]),disabled:!te.value,onClick:D},[C.value?(u(),d("span",Ha,"Signing upâ€¦")):(u(),d("span",Ga,"Sign Up"))],10,Xa),c[12]||(c[12]=e("p",{class:"hint"},"Required: Player Name, Teammate Name, Team Name",-1))])]),e("div",Ja,[e("div",Za,[c[14]||(c[14]=e("div",{class:"dot"},null,-1)),e("div",null,[c[13]||(c[13]=e("div",{class:"mh-title"},"Signed Up Teams",-1)),I.value?(u(),d("div",Qa,"Loadingâ€¦")):(u(),d("div",es,w(F.value.length)+" teams",1))])]),F.value.length===0&&!I.value?(u(),d("div",ts," No teams yet â€” be the first ðŸ‘€ ")):(u(),d("div",as,[(u(!0),d(O,null,oe(F.value,(g,B)=>(u(),d("div",{class:"team-row",key:re(g)+":"+B},[e("div",ss,[e("span",ns,w(se(g)),1),g.timestamp?(u(),d("span",ls,"("+w(new Date(g.timestamp).toLocaleString())+")",1)):L("",!0)]),e("div",os,[g.playerTwitch?(u(),d("a",{key:0,class:"pill-link",href:N(g.playerTwitch),target:"_blank",rel:"noopener noreferrer"}," Player 1: "+w(m(N(g.playerTwitch))),9,is)):L("",!0),g.teammateTwitch?(u(),d("a",{key:1,class:"pill-link",href:N(g.teammateTwitch),target:"_blank",rel:"noopener noreferrer"}," Player 2: "+w(m(N(g.teammateTwitch))),9,rs)):L("",!0)])]))),128))]))])]))}}),us=Pe(ds,[["__scopeId","data-v-5f21764b"]]);var G=function(){return G=Object.assign||function(a){for(var r,f=1,E=arguments.length;f<E;f++){r=arguments[f];for(var P in r)Object.prototype.hasOwnProperty.call(r,P)&&(a[P]=r[P])}return a},G.apply(this,arguments)};typeof window<"u"&&(window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),typeof window.CustomEvent!="function"&&(window.CustomEvent=function(a,r){r=r||{bubbles:!1,cancelable:!1,detail:null};var f=document.createEvent("CustomEvent");return f.initCustomEvent(a,r.bubbles,r.cancelable,r.detail),f}));var cs=typeof document<"u"&&!!document.documentMode,Ie;function vs(){return Ie||(Ie=document.createElement("div").style)}var at=["webkit","moz","ms"],Ee={};function Ye(n){if(Ee[n])return Ee[n];var a=vs();if(n in a)return Ee[n]=n;for(var r=n[0].toUpperCase()+n.slice(1),f=at.length;f--;){var E="".concat(at[f]).concat(r);if(E in a)return Ee[n]=E}}function Ae(n,a){return parseFloat(a[Ye(n)])||0}function Me(n,a,r){r===void 0&&(r=window.getComputedStyle(n));var f=a==="border"?"Width":"";return{left:Ae("".concat(a,"Left").concat(f),r),right:Ae("".concat(a,"Right").concat(f),r),top:Ae("".concat(a,"Top").concat(f),r),bottom:Ae("".concat(a,"Bottom").concat(f),r)}}function ye(n,a,r){n.style[Ye(a)]=r}function ms(n,a){var r=Ye("transform");ye(n,"transition","".concat(r," ").concat(a.duration,"ms ").concat(a.easing))}function fs(n,a,r){var f=a.x,E=a.y,P=a.scale,C=a.isSVG;if(ye(n,"transform","scale(".concat(P,") translate(").concat(f,"px, ").concat(E,"px)")),C&&cs){var S=window.getComputedStyle(n).getPropertyValue("transform");n.setAttribute("transform",S)}}function Le(n){var a=n.parentNode,r=window.getComputedStyle(n),f=window.getComputedStyle(a),E=n.getBoundingClientRect(),P=a.getBoundingClientRect();return{elem:{style:r,width:E.width,height:E.height,top:E.top,bottom:E.bottom,left:E.left,right:E.right,margin:Me(n,"margin",r),border:Me(n,"border",r)},parent:{style:f,width:P.width,height:P.height,top:P.top,bottom:P.bottom,left:P.left,right:P.right,padding:Me(a,"padding",f),border:Me(a,"border",f)}}}var Ce={down:"mousedown",move:"mousemove",up:"mouseup mouseleave"};typeof window<"u"&&(typeof window.PointerEvent=="function"?Ce={down:"pointerdown",move:"pointermove",up:"pointerup pointerleave pointercancel"}:typeof window.TouchEvent=="function"&&(Ce={down:"touchstart",move:"touchmove",up:"touchend touchcancel"}));function Oe(n,a,r,f){Ce[n].split(" ").forEach(function(E){a.addEventListener(E,r,f)})}function Be(n,a,r){Ce[n].split(" ").forEach(function(f){a.removeEventListener(f,r)})}function nt(n,a){for(var r=n.length;r--;)if(n[r].pointerId===a.pointerId)return r;return-1}function ze(n,a){var r;if(a.touches){r=0;for(var f=0,E=a.touches;f<E.length;f++){var P=E[f];P.pointerId=r++,ze(n,P)}return}r=nt(n,a),r>-1&&n.splice(r,1),n.push(a)}function ps(n,a){if(a.touches){for(;n.length;)n.pop();return}var r=nt(n,a);r>-1&&n.splice(r,1)}function st(n){n=n.slice(0);for(var a=n.pop(),r;r=n.pop();)a={clientX:(r.clientX-a.clientX)/2+a.clientX,clientY:(r.clientY-a.clientY)/2+a.clientY};return a}function Ue(n){if(n.length<2)return 0;var a=n[0],r=n[1];return Math.sqrt(Math.pow(Math.abs(r.clientX-a.clientX),2)+Math.pow(Math.abs(r.clientY-a.clientY),2))}function hs(n){for(var a=n;a&&a.parentNode;){if(a.parentNode===document)return!0;a=a.parentNode instanceof ShadowRoot?a.parentNode.host:a.parentNode}return!1}function gs(n){return(n.getAttribute("class")||"").trim()}function ys(n,a){return n.nodeType===1&&" ".concat(gs(n)," ").indexOf(" ".concat(a," "))>-1}function ws(n,a){for(var r=n;r!=null;r=r.parentNode)if(ys(r,a.excludeClass)||a.exclude.indexOf(r)>-1)return!0;return!1}var bs=/^http:[\w\.\/]+svg$/;function ks(n){return bs.test(n.namespaceURI)&&n.nodeName.toLowerCase()!=="svg"}function _s(n){var a={};for(var r in n)n.hasOwnProperty(r)&&(a[r]=n[r]);return a}var lt={animate:!1,canvas:!1,cursor:"move",disablePan:!1,disableZoom:!1,disableXAxis:!1,disableYAxis:!1,duration:200,easing:"ease-in-out",exclude:[],excludeClass:"panzoom-exclude",handleStartEvent:function(n){n.preventDefault(),n.stopPropagation()},maxScale:4,minScale:.125,overflow:"hidden",panOnlyWhenZoomed:!1,pinchAndPan:!1,relative:!1,setTransform:fs,startX:0,startY:0,startScale:1,step:.3,touchAction:"none"};function ot(n,a){if(!n)throw new Error("Panzoom requires an element as an argument");if(n.nodeType!==1)throw new Error("Panzoom requires an element with a nodeType of 1");if(!hs(n))throw new Error("Panzoom should be called on elements that have been attached to the DOM");a=G(G({},lt),a);var r=ks(n),f=n.parentNode;f.style.overflow=a.overflow,f.style.userSelect="none",f.style.touchAction=a.touchAction,(a.canvas?f:n).style.cursor=a.cursor,n.style.userSelect="none",n.style.touchAction=a.touchAction,ye(n,"transformOrigin",typeof a.origin=="string"?a.origin:r?"0 0":"50% 50%");function E(){f.style.overflow="",f.style.userSelect="",f.style.touchAction="",f.style.cursor="",n.style.cursor="",n.style.userSelect="",n.style.touchAction="",ye(n,"transformOrigin","")}function P(t){t===void 0&&(t={});for(var i in t)t.hasOwnProperty(i)&&(a[i]=t[i]);(t.hasOwnProperty("cursor")||t.hasOwnProperty("canvas"))&&(f.style.cursor=n.style.cursor="",(a.canvas?f:n).style.cursor=a.cursor),t.hasOwnProperty("overflow")&&(f.style.overflow=t.overflow),t.hasOwnProperty("touchAction")&&(f.style.touchAction=t.touchAction,n.style.touchAction=t.touchAction)}var C=0,S=0,p=1,R=!1;ee(a.startScale,{animate:!1,force:!0}),setTimeout(function(){M(a.startX,a.startY,{animate:!1,force:!0})});function I(t,i,v){if(!v.silent){var T=new CustomEvent(t,{detail:i});n.dispatchEvent(T)}}function Y(t,i,v){var T={x:C,y:S,scale:p,isSVG:r,originalEvent:v};return requestAnimationFrame(function(){typeof i.animate=="boolean"&&(i.animate?ms(n,i):ye(n,"transition","none")),i.setTransform(n,T,i),I(t,T,i),I("panzoomchange",T,i)}),T}function N(t,i,v,T){var h=G(G({},a),T),A={x:C,y:S,opts:h};if(!T?.force&&(h.disablePan||h.panOnlyWhenZoomed&&p===h.startScale))return A;if(t=parseFloat(t),i=parseFloat(i),h.disableXAxis||(A.x=(h.relative?C:0)+t),h.disableYAxis||(A.y=(h.relative?S:0)+i),h.contain){var k=Le(n),H=k.elem.width/p,X=k.elem.height/p,fe=H*v,pe=X*v,W=(fe-H)/2,de=(pe-X)/2;if(h.contain==="inside"){var ge=(-k.elem.margin.left-k.parent.padding.left+W)/v,be=(k.parent.width-fe-k.parent.padding.left-k.elem.margin.left-k.parent.border.left-k.parent.border.right+W)/v;A.x=Math.max(Math.min(A.x,be),ge);var ke=(-k.elem.margin.top-k.parent.padding.top+de)/v,_e=(k.parent.height-pe-k.parent.padding.top-k.elem.margin.top-k.parent.border.top-k.parent.border.bottom+de)/v;A.y=Math.max(Math.min(A.y,_e),ke)}else if(h.contain==="outside"){var ge=(-(fe-k.parent.width)-k.parent.padding.left-k.parent.border.left-k.parent.border.right+W)/v,be=(W-k.parent.padding.left)/v;A.x=Math.max(Math.min(A.x,be),ge);var ke=(-(pe-k.parent.height)-k.parent.padding.top-k.parent.border.top-k.parent.border.bottom+de)/v,_e=(de-k.parent.padding.top)/v;A.y=Math.max(Math.min(A.y,_e),ke)}}return h.roundPixels&&(A.x=Math.round(A.x),A.y=Math.round(A.y)),A}function m(t,i){var v=G(G({},a),i),T={scale:p,opts:v};if(!i?.force&&v.disableZoom)return T;var h=a.minScale,A=a.maxScale;if(v.contain){var k=Le(n),H=k.elem.width/p,X=k.elem.height/p;if(H>1&&X>1){var fe=k.parent.width-k.parent.border.left-k.parent.border.right,pe=k.parent.height-k.parent.border.top-k.parent.border.bottom,W=fe/H,de=pe/X;a.contain==="inside"?A=Math.min(A,W,de):a.contain==="outside"&&(h=Math.max(h,W,de))}}return T.scale=Math.min(Math.max(t,h),A),T}function M(t,i,v,T){var h=N(t,i,p,v);return C!==h.x||S!==h.y?(C=h.x,S=h.y,Y("panzoompan",h.opts,T)):{x:C,y:S,scale:p,isSVG:r,originalEvent:T}}function ee(t,i,v){var T=m(t,i),h=T.opts;if(!(!i?.force&&h.disableZoom)){t=T.scale;var A=C,k=S;if(h.focal){var H=h.focal;A=(H.x/t-H.x/p+C*t)/t,k=(H.y/t-H.y/p+S*t)/t}var X=N(A,k,t,{relative:!1,force:!0});return C=X.x,S=X.y,p=t,Y("panzoomzoom",h,v)}}function U(t,i){var v=G(G(G({},a),{animate:!0}),i);return ee(p*Math.exp((t?1:-1)*v.step),v)}function re(t){return U(!0,t)}function se(t){return U(!1,t)}function te(t,i,v,T){var h=Le(n),A={width:h.parent.width-h.parent.padding.left-h.parent.padding.right-h.parent.border.left-h.parent.border.right,height:h.parent.height-h.parent.padding.top-h.parent.padding.bottom-h.parent.border.top-h.parent.border.bottom},k=i.clientX-h.parent.left-h.parent.padding.left-h.parent.border.left-h.elem.margin.left,H=i.clientY-h.parent.top-h.parent.padding.top-h.parent.border.top-h.elem.margin.top;r||(k-=h.elem.width/p/2,H-=h.elem.height/p/2);var X={x:k/A.width*(A.width*t),y:H/A.height*(A.height*t)};return ee(t,G(G({},v),{animate:!1,focal:X}),T)}function J(t,i){t.preventDefault();var v=G(G(G({},a),i),{animate:!1}),T=t.deltaY===0&&t.deltaX?t.deltaX:t.deltaY,h=T<0?1:-1,A=m(p*Math.exp(h*v.step/3),v).scale;return te(A,t,v,t)}function D(t){var i=G(G(G({},a),{animate:!0,force:!0}),t);p=m(i.startScale,i).scale;var v=N(i.startX,i.startY,p,i);return C=v.x,S=v.y,Y("panzoomreset",i)}var F,_,c,g,B,V,y=[];function Z(t){if(!ws(t.target,a)){ze(y,t),R=!0,a.handleStartEvent(t),F=C,_=S,I("panzoomstart",{x:C,y:S,scale:p,isSVG:r,originalEvent:t},a);var i=st(y);c=i.clientX,g=i.clientY,B=p,V=Ue(y)}}function ne(t){if(!(!R||F===void 0||_===void 0||c===void 0||g===void 0)){ze(y,t);var i=st(y),v=y.length>1,T=p;if(v){V===0&&(V=Ue(y));var h=Ue(y)-V;T=m(h*a.step/80+B).scale,te(T,i,{animate:!1},t)}(!v||a.pinchAndPan)&&M(F+(i.clientX-c)/T,_+(i.clientY-g)/T,{animate:!1},t)}}function Q(t){y.length===1&&I("panzoomend",{x:C,y:S,scale:p,isSVG:r,originalEvent:t},a),ps(y,t),R&&(R=!1,F=_=c=g=void 0)}var z=!1;function he(){z||(z=!0,Oe("down",a.canvas?f:n,Z),Oe("move",document,ne,{passive:!0}),Oe("up",document,Q,{passive:!0}))}function $(){z=!1,Be("down",a.canvas?f:n,Z),Be("move",document,ne),Be("up",document,Q)}return a.noBind||he(),{bind:he,destroy:$,eventNames:Ce,getPan:function(){return{x:C,y:S}},getScale:function(){return p},getOptions:function(){return _s(a)},handleDown:Z,handleMove:ne,handleUp:Q,pan:M,reset:D,resetStyle:E,setOptions:P,setStyle:function(t,i){return ye(n,t,i)},zoom:ee,zoomIn:re,zoomOut:se,zoomToPoint:te,zoomWithWheel:J}}ot.defaultOptions=lt;const $s={class:"map-wrap"},Ss={class:"topbar"},Cs={class:"left"},xs={class:"title"},Ts={class:"title-text"},Ps={class:"sub"},Ns={key:0},Es={class:"controls"},As=["value"],Ms=["value"],Ds=["value"],Rs={class:"toggle"},Is={key:0,class:"placement-hint"},Ls={key:0,class:"copied"},Os={class:"right"},Bs={key:0,class:"status"},Us={key:1,class:"status error"},Vs={class:"panzoom-root"},Fs=["src"],zs={key:0,class:"route-svg",viewBox:"0 0 100 100",preserveAspectRatio:"none"},Ys=["points"],Ws=["title"],Ks=["onClick","title"],js={class:"legend"},qs={key:0,class:"legend-row"},Xs={key:0,class:"drawer"},Gs={key:0,class:"route-panel"},Hs={class:"route-head"},Js={class:"route-sub"},Zs={class:"toggle route-toggle"},Qs={class:"route-list"},en=["onClick"],tn={class:"idx"},an={class:"name"},sn={key:0,class:"locmark"},nn={key:0,class:"loc"},ln={key:1,class:"tag kindling"},on={key:2,class:"tag done"},rn={class:"drawer-head"},dn={class:"drawer-title"},un={class:"name"},cn={key:0,class:"loc"},vn={class:"drawer-body"},mn={class:"pill-row"},fn={key:0,class:"pill"},pn={key:0,class:"desc"},hn={class:"actions"},gn={key:1,class:"note"},yn={key:2,class:"drawer-head"},wn={class:"drawer-title"},bn={class:"loc"},Ve=1,kn="/data/dlcRoutes.json",_n=xe({__name:"Map",props:{mapSrc:{},dataUrl:{default:"/data/dlcChecks.json"},checks:{default:void 0},startPlacementMode:{type:Boolean,default:!1},categoryOrder:{default:void 0},maxScale:{default:5},minScale:{default:.4},startShrink:{default:1},fitPadding:{default:0},startYOffset:{default:650}},setup(n){const a=n,r=K(()=>{const o=(a.mapSrc||"map").replace(/[^a-z0-9_-]/gi,"_");return`dlcChecksProgress:v${Ve}:${o}:${p.value}`});function f(){try{const o=localStorage.getItem(r.value);if(!o)return null;const s=JSON.parse(o);return!s||s.v!==Ve||!s.checks?null:s}catch{return null}}function E(){try{const o={v:Ve,updatedAt:Date.now(),checks:Object.fromEntries(D.value.filter(s=>!z(s)).map(s=>[s.id,{done:!!s.done,kindling:!!s.kindling}]))};localStorage.setItem(r.value,JSON.stringify(o))}catch{}}function P(){const o=f();if(!o)return;const s=o.checks;D.value=D.value.map(l=>{if(z(l))return l;const x=s[l.id];return x?{...l,done:!!x.done,kindling:!!x.kindling}:l})}function C(){try{localStorage.removeItem(r.value)}catch{}D.value=D.value.map(o=>z(o)?o:{...o,done:!1,kindling:!1})}const S=b([{id:"all",label:"All Checks",url:""},{id:"defaultSeed",label:"Default Checks",url:"/data/dlcSeeds/default.json"},{id:"seed2",label:"Seed 2 Checklist",url:"/data/dlcSeeds/seed2.json"},{id:"seed1",label:"Seed 1 Checklist",url:"/data/dlcSeeds/seed1.json"}]),p=b("seed1"),R=b(null),I=b(!0),Y=b([]),N=b(""),m=K(()=>Y.value.find(o=>o.routeId===N.value)??null),M=K(()=>m.value?I.value?X.value:X.value.filter(o=>!z(o)):[]),ee=K(()=>!m.value||!I.value?[]:X.value.filter(o=>z(o))),U=b(null),re=b(null),se=b(null),te=b(!1),J=b(""),D=b([]),F=b(null),_=b(!!a.startPlacementMode),c=b(""),g=b(""),B=b("all"),V=b(!0);let y=null,Z=null,ne=0;const Q=b(null);function z(o){return(o.category||"").toLowerCase()==="location"}async function he(){J.value="",te.value=!0;try{if(a.checks?.length){D.value=a.checks.map(x=>({...x,done:!!x.done,kindling:!!x.kindling}));return}const o=await fetch(a.dataUrl,{cache:"no-store"});if(!o.ok)throw new Error(`Failed to load checks: ${o.status}`);const s=await o.json(),l=Array.isArray(s)?s:s.checks;D.value=(l||[]).map(x=>({...x,done:!!x.done,kindling:!!x.kindling})),P()}catch(o){J.value=o?.message??"Failed to load checks."}finally{te.value=!1}}Ne(p,async()=>{await i(),F.value=null,P()});let $=null;function t(){$&&window.clearTimeout($),$=window.setTimeout(()=>{$=null,E()},250)}Ne(D,()=>{t()},{deep:!0}),we(()=>{$&&window.clearTimeout($)});async function i(){R.value=null;const o=S.value.find(s=>s.id===p.value);if(!(!o||!o.url))try{const s=await fetch(o.url,{cache:"no-store"});if(!s.ok)throw new Error(`Failed to load seed list: ${s.status}`);R.value=await s.json()}catch(s){J.value=s?.message??"Failed to load seed list."}}async function v(){try{const o=await fetch(kn,{cache:"no-store"});if(!o.ok)throw new Error(`Failed to load routes: ${o.status}`);const s=await o.json();Y.value=Array.isArray(s)?s:s.routes}catch(o){console.warn(o?.message??"Failed to load routes"),Y.value=[]}}const T=K(()=>{if(p.value==="all"||!R.value)return D.value;const o=new Set(R.value.checkIds),s=D.value.filter(ae=>o.has(ae.id)),l=R.value.defaultCount;if(!l||s.length<=l)return s;const x=new Map(s.map(ae=>[ae.id,ae]));return R.value.checkIds.map(ae=>x.get(ae)).filter(Boolean).slice(0,l)}),h=K(()=>T.value.filter(o=>!z(o)));K(()=>T.value.filter(o=>z(o)));const A=K(()=>{const o=new Set;for(const x of h.value)x.category&&o.add(x.category);const s=Array.from(o).sort((x,j)=>x.localeCompare(j));if(!a.categoryOrder?.length)return s;const l=a.categoryOrder.filter(x=>o.has(x));for(const x of s)l.includes(x)||l.push(x);return l}),k=K(()=>{const o=g.value.trim().toLowerCase();return h.value.filter(s=>!V.value&&(s.done||s.kindling)||B.value!=="all"&&(s.category||"")!==B.value?!1:o?`${s.name} ${s.locationName??""} ${s.description??""}`.toLowerCase().includes(o):!0)}),H=K(()=>h.value.filter(o=>o.done||o.kindling).length),X=K(()=>{const o=m.value;if(!o)return[];const s=new Map(D.value.map(l=>[l.id,l]));return o.checkIds.map(l=>s.get(l)).filter(Boolean)}),fe=K(()=>X.value.map(o=>`${o.x},${o.y}`).join(" ")),pe=K(()=>m.value?X.value.filter(o=>!z(o)):k.value);K(()=>m.value?X.value.filter(o=>z(o)):[]);const W=K(()=>F.value?D.value.find(o=>o.id===F.value)??null:null);function de(o){F.value=o}function ge(){F.value=null,N.value=""}function be(o){const s=D.value.findIndex(l=>l.id===o);s!==-1&&(z(D.value[s])||(D.value[s]={...D.value[s],done:!D.value[s].done}))}function ke(o){const s=D.value.findIndex(x=>x.id===o);if(s===-1||z(D.value[s]))return;const l=D.value[s];D.value[s]={...l,kindling:!l.kindling}}const _e=K(()=>h.value.filter(o=>!!o.kindling).length);function it(o){const s=se.value;if(!s)return null;const l=s.getBoundingClientRect(),x=(o.clientX-l.left)/l.width,j=(o.clientY-l.top)/l.height,ae=Math.max(0,Math.min(100,x*100)),ce=Math.max(0,Math.min(100,j*100));return{x:ae,y:ce}}async function rt(o){if(!_.value)return;const s=it(o);if(!s)return;const l=`{ "x": ${s.x.toFixed(2)}, "y": ${s.y.toFixed(2)} }`;c.value=l;try{await navigator.clipboard.writeText(l)}catch{}}function De(o){const s=U.value,l=se.value;if(!y||!s||!l||o!==ne)return;const x=s.getBoundingClientRect(),j=l.getBoundingClientRect();let ae=0,ce=0;if(j.left>x.left&&(ae=x.left-j.left),j.right<x.right&&(ae=x.right-j.right),j.top>x.top&&(ce=x.top-j.top),j.bottom<x.bottom&&(ce=x.bottom-j.bottom),ae!==0||ce!==0){const $e=y.getPan();y.pan($e.x+ae,$e.y+ce,{relative:!1,force:!0,animate:!1})}}function We(o=!0,s=!0){const l=se.value,x=U.value;if(!y||!l||!x)return;const j=++ne,ae=l.naturalWidth||1,ce=l.naturalHeight||1,$e=x.getBoundingClientRect(),je=Math.max(1,$e.width),qe=Math.max(1,$e.height),ct=Math.max(je/ae,qe/ce);y.pan(0,0,{relative:!1,force:!0,animate:!1});const Xe=y.getScale();Xe!==1&&y.zoom(1/Xe,{force:!0,animate:!1}),y.zoom(ct/y.getScale(),{force:!0,animate:!1});const Ge=y.getScale(),vt=ae*Ge,mt=ce*Ge;let ft=(je-vt)/2,pt=(qe-mt)/2;y.pan(Math.round(ft),Math.round(pt),{relative:!1,force:!0,animate:!1}),requestAnimationFrame(()=>{if(j!==ne)return;De(j);const He=a.startYOffset??0;if(He){const ve=y.getPan();y.pan(ve.x,ve.y-He,{relative:!1,force:!0,animate:!1})}requestAnimationFrame(()=>{j===ne&&(De(j),requestAnimationFrame(()=>{if(j===ne){if(De(j),s){const ve=y.getPan();Q.value={scale:y.getScale(),x:ve.x,y:ve.y}}if(o){const ve=y.getPan();y.pan(ve.x,ve.y,{relative:!1,force:!0,animate:!0})}}}))})})}function dt(){if(!y||!Q.value){We(!0,!0);return}const o=Q.value,s=o.scale/y.getScale();y.zoom(s,{force:!0,animate:!0}),y.pan(o.x,o.y,{relative:!1,force:!0,animate:!0})}function ut(){const o=re.value,s=U.value;!o||!s||(Ke(),y=ot(o,{maxScale:a.maxScale,minScale:a.minScale,contain:void 0,cursor:"grab"}),Z=l=>{y&&(l.ctrlKey||(l.preventDefault(),y.zoomWithWheel(l)))},s.addEventListener("wheel",Z,{passive:!1}))}function Ke(){const o=U.value;if(o&&Z&&o.removeEventListener("wheel",Z),Z=null,y){try{y.destroy()}catch{}y=null}}return Ne(p,async()=>{await i(),F.value=null}),Ne(N,()=>{F.value=null}),Te(async()=>{await he(),await i(),await v(),await ht(),ut();const o=se.value;if(!o)return;const s=()=>{We(!1,!0),requestAnimationFrame(()=>dt())};o.complete?s():o.addEventListener("load",s,{once:!0})}),we(()=>{Ke()}),(o,s)=>(u(),d("div",$s,[e("div",Ss,[e("div",Cs,[e("div",xs,[s[10]||(s[10]=e("span",{class:"spark"},"ðŸ§­",-1)),e("div",Ts,[s[9]||(s[9]=e("div",{class:"h1"},"DLC Checks Map (WIP)",-1)),e("div",Ps,[ie(w(H.value)+"/"+w(h.value.length)+" completed â€¢ ðŸ”¥ "+w(_e.value)+" Kindling Shards ",1),k.value.length!==h.value.length?(u(),d("span",Ns," â€¢ showing "+w(k.value.length),1)):L("",!0)])])]),e("div",Es,[q(e("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>g.value=l),class:"input",type:"text",placeholder:"Search checksâ€¦"},null,512),[[le,g.value]]),q(e("select",{"onUpdate:modelValue":s[1]||(s[1]=l=>p.value=l),class:"select"},[(u(!0),d(O,null,oe(S.value,l=>(u(),d("option",{key:l.id,value:l.id},w(l.label),9,As))),128))],512),[[Re,p.value]]),q(e("select",{"onUpdate:modelValue":s[2]||(s[2]=l=>B.value=l),class:"select"},[s[11]||(s[11]=e("option",{value:"all"},"All categories",-1)),(u(!0),d(O,null,oe(A.value,l=>(u(),d("option",{key:l,value:l},w(l),9,Ms))),128))],512),[[Re,B.value]]),e("button",{class:"btn",onClick:C,title:"Clear saved progress"}," Clear Progress "),q(e("select",{"onUpdate:modelValue":s[3]||(s[3]=l=>N.value=l),class:"select"},[s[12]||(s[12]=e("option",{value:""},"No route (show all)",-1)),(u(!0),d(O,null,oe(Y.value,l=>(u(),d("option",{key:l.routeId,value:l.routeId},w(l.label),9,Ds))),128))],512),[[Re,N.value]]),e("label",Rs,[q(e("input",{"onUpdate:modelValue":s[4]||(s[4]=l=>V.value=l),type:"checkbox"},null,512),[[Ze,V.value]]),s[13]||(s[13]=e("span",null,"Show completed",-1))])]),_.value?(u(),d("div",Is,[s[14]||(s[14]=e("b",null,"Placement mode:",-1)),s[15]||(s[15]=ie(" click the map to copy coordinates. ",-1)),c.value?(u(),d("span",Ls,"Copied: "+w(c.value),1)):L("",!0)])):L("",!0)]),e("div",Os,[te.value?(u(),d("div",Bs,"Loading checksâ€¦")):J.value?(u(),d("div",Us,"âŒ "+w(J.value),1)):L("",!0)])]),e("div",{ref_key:"containerEl",ref:U,class:ue(["map-viewport",{placing:_.value}]),onClick:rt},[e("div",Vs,[e("div",{ref_key:"panzoomEl",ref:re,class:"map-layer"},[e("img",{ref_key:"imgEl",ref:se,class:"map-img",src:o.mapSrc,alt:"DLC map"},null,8,Fs),m.value&&X.value.length>=2?(u(),d("svg",zs,[e("polyline",{class:"route-line",points:fe.value},null,8,Ys)])):L("",!0),(u(!0),d(O,null,oe(ee.value,l=>(u(),d("button",{key:l.id,class:"waypoint",style:Qe({left:l.x+"%",top:l.y+"%"}),onClick:s[5]||(s[5]=Fe(()=>{},["stop"])),title:l.name}," â›³ ",12,Ws))),128)),(u(!0),d(O,null,oe(pe.value,l=>(u(),d("button",{key:l.id,class:ue(["pin",{done:!!l.done,kindling:!!l.kindling,selected:F.value===l.id,inRoute:!!m.value}]),style:Qe({left:l.x+"%",top:l.y+"%"}),onClick:Fe(x=>de(l.id),["stop"]),title:l.locationName?`${l.name} â€” ${l.locationName}`:l.name},s[16]||(s[16]=[e("span",{class:"dot"},null,-1)]),14,Ks))),128))],512)]),e("div",js,[s[18]||(s[18]=Se('<div class="legend-row" data-v-5aedbda8><span class="legend-dot" data-v-5aedbda8></span><span data-v-5aedbda8>Incomplete</span></div><div class="legend-row" data-v-5aedbda8><span class="legend-dot done" data-v-5aedbda8></span><span data-v-5aedbda8>Completed</span></div><div class="legend-row" data-v-5aedbda8><span class="legend-dot kindling" data-v-5aedbda8></span><span data-v-5aedbda8>Kindling</span></div>',3)),m.value&&I.value?(u(),d("div",qs,s[17]||(s[17]=[e("span",{class:"legend-flag"},"â›³",-1),e("span",null,"Route waypoint",-1)]))):L("",!0)])],2),me(gt,{name:"slide"},{default:yt(()=>[W.value||m.value?(u(),d("aside",Xs,[m.value?(u(),d("div",Gs,[e("div",Hs,[s[20]||(s[20]=e("div",{class:"route-title"},"Route",-1)),e("div",Js,w(m.value.label)+" â€¢ "+w(X.value.length)+" items",1),e("label",Zs,[q(e("input",{"onUpdate:modelValue":s[6]||(s[6]=l=>I.value=l),type:"checkbox"},null,512),[[Ze,I.value]]),s[19]||(s[19]=e("span",null,"Show locations",-1))])]),e("ol",Qs,[(u(!0),d(O,null,oe(M.value,(l,x)=>(u(),d("li",{key:l.id,class:ue(["route-item",{isLocation:z(l),active:F.value===l.id}]),onClick:j=>de(l.id)},[e("span",tn,w(x+1),1),e("span",an,[z(l)?(u(),d("span",sn,"â›³")):L("",!0),ie(" "+w(l.name),1)]),l.locationName?(u(),d("span",nn,"â€” "+w(l.locationName),1)):L("",!0),!z(l)&&l.kindling?(u(),d("span",ln,"Kindling")):!z(l)&&l.done?(u(),d("span",on,"Done")):L("",!0)],10,en))),128))])])):L("",!0),W.value?(u(),d(O,{key:1},[e("div",rn,[e("div",dn,[e("div",un,w(W.value.name),1),W.value.locationName?(u(),d("div",cn,w(W.value.locationName),1)):L("",!0)]),e("button",{class:"icon-btn",onClick:ge,"aria-label":"Close"},"âœ•")]),e("div",vn,[e("div",mn,[W.value.category?(u(),d("span",fn,w(W.value.category),1)):L("",!0)]),W.value.description?(u(),d("p",pn,w(W.value.description),1)):L("",!0),e("div",hn,[z(W.value)?L("",!0):(u(),d(O,{key:0},[e("button",{class:"btn primary",onClick:s[7]||(s[7]=l=>be(W.value.id))},w(W.value.done?"Mark incomplete":"Mark complete"),1),e("button",{class:"btn kindling",onClick:s[8]||(s[8]=l=>ke(W.value.id))},w(W.value.kindling?"Remove kindling":"Mark as Kindling"),1)],64))]),z(W.value)?(u(),d("div",gn,s[21]||(s[21]=[e("b",null,"Waypoint:",-1),ie(" This is a route marker only. It doesnâ€™t count toward completion. ",-1)]))):L("",!0)])],64)):(u(),d("div",yn,[e("div",wn,[s[22]||(s[22]=e("div",{class:"name"},"Route",-1)),e("div",bn,w(m.value?.label),1)]),e("button",{class:"icon-btn",onClick:ge,"aria-label":"Close"},"âœ•")]))])):L("",!0)]),_:1})]))}}),$n=Pe(_n,[["__scopeId","data-v-5aedbda8"]]),Sn={class:"page"},Cn={class:"home"},xn={class:"hero"},Tn={class:"hero-top"},Pn={class:"cta"},Nn={class:"hero-stats"},En={class:"stat"},An={class:"v"},Mn={class:"stat"},Dn={class:"v"},Rn={class:"stat"},In={class:"v"},Ln={class:"stack"},On={id:"seeds",class:"section"},Bn={class:"details",open:""},Un={class:"details-body"},Vn={class:"block"},Fn={id:"leaderboard",class:"section"},zn={class:"block"},Yn={key:0,class:"scroll-safe"},Wn={key:1,class:"panel muted"},Kn={id:"leaderboard",class:"section"},jn={class:"block"},qn={key:0,class:"scroll-safe"},Xn={key:1,class:"panel muted"},Gn={id:"seeds",class:"section"},Hn={class:"details",open:""},Jn={class:"details-body"},Zn={class:"block"},Qn={id:"rules",class:"section"},el={class:"details",open:""},tl={class:"details-body scroll-safe"},al={id:"signup"},sl=xe({__name:"HomePage",setup(n){const a=b([]),r=b([]),f=b([]),E=b(null),P=b(new Date);let C=null;function S(N){const m=new Date(N);return Number.isNaN(m.getTime())?new Date(0):m}function p(N,m){return N===!0?!0:N===!1?!1:P.value.getTime()>=S(m).getTime()}function R(N){const m=S(N).getTime();return m===0?!1:P.value.getTime()>=m}const I=K(()=>{if(!E.value)return!1;for(const N of E.value.weeks||[])for(const m of N.seeds||[]){const M=p(m.releases.forceDownload,m.releases.downloadAt),ee=!R(m.deadlineAt);if(M&&ee)return!0}return!1});Te(async()=>{const[N,m]=await Promise.all([fetch("/data/teams.json",{cache:"no-store"}),fetch("/data/releases.json",{cache:"no-store"})]),M=await N.json();a.value=M.teams||[],r.value=M.races||[],f.value=M.pointsTable||[],E.value=await m.json(),C=window.setInterval(()=>P.value=new Date,1e3)}),we(()=>{C&&window.clearInterval(C)});function Y(N){const m=document.getElementById(N);m&&m.scrollIntoView({behavior:"smooth",block:"start"})}return(N,m)=>(u(),d("div",Sn,[e("div",Cn,[e("header",xn,[e("div",Tn,[m[5]||(m[5]=e("div",{class:"brand"},[e("span",{class:"badge"},"Ignite Hosted 2v2 DLC Randomizer Event"),e("h1",{class:"title"},"Absoloot Chaos"),e("p",{class:"sub"}," Seeds unlock on a schedule. Download when ready, race, and submit before the deadline. ")],-1)),e("div",Pn,[e("button",{class:"chip",onClick:m[0]||(m[0]=M=>Y("seeds"))},"Seeds"),e("button",{class:"chip",onClick:m[1]||(m[1]=M=>Y("leaderboard"))},"Leaderboard"),e("button",{class:"chip",onClick:m[2]||(m[2]=M=>Y("rules"))},"Rules"),e("button",{class:"chip",onClick:m[3]||(m[3]=M=>Y("DLCChecksMap"))},"DLC Checks Map"),e("button",{class:"chip-live",onClick:m[4]||(m[4]=M=>Y("signup"))},"Sign Ups")])]),e("div",Nn,[e("div",En,[m[6]||(m[6]=e("div",{class:"k"},"Teams",-1)),e("div",An,w(a.value.length||"â€”"),1)]),e("div",Mn,[m[7]||(m[7]=e("div",{class:"k"},"Races",-1)),e("div",Dn,w(r.value.length||"â€”"),1)]),e("div",Rn,[m[8]||(m[8]=e("div",{class:"k"},"Seed Status",-1)),e("div",In,w(I.value?"Active":"Locked"),1)])])]),e("main",Ln,[I.value?(u(),d(O,{key:0},[e("section",On,[e("details",Bn,[m[9]||(m[9]=Se('<summary class="summary" data-v-73199fd4><div class="sum-left" data-v-73199fd4><h2 class="sum-title" data-v-73199fd4>Seed Releases</h2><p class="summary-sub" data-v-73199fd4>Click to collapse / expand</p></div><span class="chev" data-v-73199fd4>â–¾</span></summary>',1)),e("div",Un,[e("div",Vn,[me(et)])])])]),e("section",Fn,[m[10]||(m[10]=e("div",{class:"section-head"},[e("h2",null,"Leaderboard"),e("p",null,"Ranked by team time with F1-style points. Expand for race details. (Details will be hidden until Deadline)")],-1)),e("div",zn,[a.value.length?(u(),d("div",Yn,[me(Je,{teams:a.value,raceOrder:r.value,pointsTable:f.value},null,8,["teams","raceOrder","pointsTable"])])):(u(),d("div",Wn,"Loading leaderboardâ€¦"))])])],64)):(u(),d(O,{key:1},[e("section",Kn,[m[11]||(m[11]=e("div",{class:"section-head"},[e("h2",null,"Leaderboard"),e("p",null,"Ranked by team time with F1-style points. Expand for race details.")],-1)),e("div",jn,[a.value.length?(u(),d("div",qn,[me(Je,{teams:a.value,raceOrder:r.value,pointsTable:f.value},null,8,["teams","raceOrder","pointsTable"])])):(u(),d("div",Xn,"Loading leaderboardâ€¦"))])]),e("section",Gn,[e("details",Hn,[m[12]||(m[12]=Se('<summary class="summary" data-v-73199fd4><div class="sum-left" data-v-73199fd4><h2 class="sum-title" data-v-73199fd4>Seed Releases</h2><p class="summary-sub" data-v-73199fd4>Click to collapse / expand</p></div><span class="chev" data-v-73199fd4>â–¾</span></summary>',1)),e("div",Jn,[e("div",Zn,[me(et)])])])])],64)),e("section",Qn,[e("details",el,[m[13]||(m[13]=Se('<summary class="summary" data-v-73199fd4><div class="sum-left" data-v-73199fd4><h2 class="sum-title" data-v-73199fd4>Rules</h2><p class="summary-sub" data-v-73199fd4>Click to collapse / expand</p></div><span class="chev" data-v-73199fd4>â–¾</span></summary>',1)),e("div",tl,[me(Ot)])])])]),m[14]||(m[14]=e("section",{id:"DLCChecksMap"},null,-1)),me($n,{"map-src":"/img/testt2.jpg","data-url":"/data/dlcChecks.json"}),e("section",al,[me(us)])])]))}}),ol=Pe(sl,[["__scopeId","data-v-73199fd4"]]);export{ol as default};
