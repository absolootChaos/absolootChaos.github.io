import{d as Ce,r as w,c as K,o as xe,a as Se,b as u,e as Ae,f as e,F as D,g as le,h as ie,n as de,t as y,i as A,j as d,_ as Te,w as Fe,k as q,v as se,l as Pe,m as ft,p as _e,q as De,s as Je,T as pt,u as ht,x as Ze}from"./index-Bb-uTgjp.js";const gt={class:"rules-page"},yt={class:"layout"},wt={class:"side"},bt={class:"nav-card"},kt=["onClick"],_t={class:"nav-text"},St={class:"content"},$t=["id"],Ct={class:"card-head"},xt={class:"card-titles"},Tt={class:"card-title"},Pt={key:0,class:"card-note"},Nt={key:0,class:"card-body"},Et={class:"bullets"},Mt={key:1,class:"subsections"},At={class:"sub-title"},Rt={class:"bullets"},Dt=Ce({__name:"Rules",setup(s){const a=[{id:"intro",title:"Introduction",items:["Welcome Rando Racers! We are Pleased to Announce an event that may make Ringus seem competitive: ABSOLOOT CHAOS","ABSOLOOT CHAOS is a 2v2 DLC Rando Event which will take place over the following 4 weeks.","Each Week, teams will be asked to do 2 seed by the given deadline and submit to see who lands on top","However, these 8 Seeds are not just any rando seeds, as each see will have a unique twist for you and your teammate to maneuver through.","Some Seeds the twist will be said in the description of a seeds release.","While Other seeds will have you and your teammate routing on the fly to newly given circumstances","The Goal is to enjoy the Chaos and have some fun"]},{id:"general",title:"General Rules",items:["These are the general rules for this event and are intended to align all players on how 2v2 DLC Randomizer is played.","Always review any seed-specific changes provided for your match. If no special rules are listed for a seed, default to the rules below.","The Goal is to kill the PCR Replacement, you can quit out once you've seen the `ENEMY FELLED` equivalent"]},{id:"submissions",title:"Submissions & Deadlines",items:["Teams must submit their times on both seeds before the set deadline listed that week."]},{id:"starting-conditions",title:"Starting Conditions",items:["Enough runes to reach Level 60","Crimson and Cerulean Flasks at +12","All Whetblades","All Talisman Pouches","All Crafting Recipes unlocked (if you have the materials, you can craft the item)","All Upgrade Bell Bearings (Smithing and Somber Stones available from Twin Maiden Husks at Roundtable Hold)","Smithing Stone cost reduced: 1 stone per upgrade or 3 stones per tier","All Spell Shops are fully randomized (any vendor, including Ymir, may sell powerful or key items)","Torrent is not scared in Abyssal Woods and can be used to reach Midra"]},{id:"progression",title:"DLC Progression & Key Items",items:["Teams will have to find the required Amount of Unique Messmer's Kindling Shards per seed. This should be in the description of the seed.","Each individual player will need a minimum amount of Messmer's Kindling Shards to get into Enir-Ilim. This should be in the description of the seed","Scadutree Fragments and Golden Seeds can only be obtained from Key Item checks.","Key Item checks include: 4 Overworld Checks and 31 Boss Checks (excluding Consort).","Revered Spirit Ashes are not randomized and remain in their vanilla locations."],subsections:[{title:"Overworld Key Item Checks (4)",items:["Oâ€™ Mother Emote â€” Bonny Village","Hole-Laden Necklace â€” obtained by speaking to Ymir","Ensis Imbued Sword Key â€” Castle Ensis","Belurat Sewer Key â€” Belurat"]},{title:"Boss Key Item Checks (31) Not Including PCR",items:["Solitary Knight - Western Nameless Mausoleum","Ghostflame Dragon - Gravesite Plains","Divine Beast Dancing Lion - Belurat","Ancient Dragon Man","Rellana","Ralva, The Great Red Bear","Golden Hippo","Scadutree Avatar","Messmer the Impaler","Commander Gauis","Black Knight Edredd - Fort of Reprimand","Ghostflame Dragon - Outside Reprimand","Black Knight Garrew - Inside Fog Rift Fort","Red Bear NPC - Northern Nameless Mausoleum","Rugalea in Rauh Base","Tree Sentinel 1 - Hinterlands","Tree Sentinel 2 - Hinterlands","Fallingstar Beast - Hinterlands","Ghostflame Dragon w/ Adds - Cerulean Coast","Dancer - Southern Nameless Mausoleum","Putrescent Knight","Death Rite Bird - Charos Hidden Grave","Jagged Peak Drake 1","Dueling Drakes","Ancient Dragon Senessax","Bayle the Dread","Rakshasa - Eastern Nameless Mausoleum","Jori, Elder Inquisitor","Midra, Lord of Frenzy Flame","Deathblight Dancing Lion","Romina, Saint of the Bud"]}]},{id:"seed-setup",title:"Seed Setup & Tools",items:["Extract the Randomizer seed files anywhere on your desktop.","Launch the seed using launchmod_rando.bat.","All seeds include a custom overlay (designed by Psiphicode) that displays boss checks and indicates which checks may contain Messmer Kindling Shards.","LiveSplit is allowed."]},{id:"team-restrictions",title:"Team Restrictions",items:["One Player on a Team must kill the Messmer Replacement before ending the race.","You Must have all Unique Shards Required to Enter and kill the PCR Replacement","Both players on a team must start with different starting classes.","Both players must use different primary weapons for the race."],subsections:[{title:"What is a Primary Weapon?",items:["A Primary Weapon is a weapon that has been used to kill a boss."]}]},{id:"quitouts",title:"Quit-Out Rules",items:["Quit-outs are allowed under normal circumstances.","A Player is allowed quit-outs indefinetely if there is only one remaining check left.","If a player quits out for more than 15 seconds while more than one check remains, their teammate must also quit out."],subsections:[{title:"Exception",items:["If the teammate is currently in a boss fight, they may finish the fight.","They must quit out immediately afterward if the original player is still quit out."]}]},{id:"skips",title:"Skips & Movement Rules",items:["Front-to-Back Skip is allowed."],subsections:[{title:"Stake Skips",items:["No intentional stake skips are allowed.","If you fail the jump down to Messmer or to Belurat from Enir-Ilim, taking the stake is allowed as long as a legitimate first attempt was clearly made."]}]}],r=w(a[0]?.id??"general");function f(T){const $=document.getElementById(T);$&&$.scrollIntoView({behavior:"smooth",block:"start"})}const P=K(()=>a.map(T=>T.id));function S(){let $=r.value,p=-1/0;for(const M of P.value){const R=document.getElementById(M);if(!R)continue;const L=R.getBoundingClientRect().top-120;L<=0&&L>p&&(p=L,$=M)}r.value=$}return xe(()=>{window.addEventListener("scroll",S,{passive:!0}),S()}),Se(()=>{window.removeEventListener("scroll",S)}),(T,$)=>(d(),u("div",gt,[$[2]||($[2]=Ae('<header class="hero" data-v-6a8ff43d><div class="gridlines" aria-hidden="true" data-v-6a8ff43d></div><div class="speed-sweep" aria-hidden="true" data-v-6a8ff43d></div><div class="hero-inner" data-v-6a8ff43d><div class="badge" data-v-6a8ff43d>Absoloot Chaos</div><h1 class="title" data-v-6a8ff43d>Event Rules</h1><p class="subtitle" data-v-6a8ff43d> Seed-specific notes override these rules. If no seed notes are provided, follow this page. </p></div></header>',1)),e("div",yt,[e("aside",wt,[e("div",bt,[$[0]||($[0]=e("div",{class:"nav-title"},"Contents",-1)),(d(),u(D,null,le(a,p=>e("button",{key:p.id,class:de(["nav-link",{active:r.value===p.id}]),onClick:M=>f(p.id),type:"button"},[e("span",_t,y(p.title),1)],10,kt)),64)),$[1]||($[1]=e("div",{class:"nav-foot"},[e("div",{class:"tiny"},[ie(" Tip: Use "),e("kbd",null,"Ctrl"),ie(" + "),e("kbd",null,"F"),ie(" to quickly find a rule. ")])],-1))])]),e("main",St,[(d(),u(D,null,le(a,p=>e("section",{key:p.id,class:"card",id:p.id},[e("header",Ct,[e("div",xt,[e("h2",Tt,y(p.title),1),p.note?(d(),u("p",Pt,y(p.note),1)):A("",!0)])]),p.items?.length?(d(),u("div",Nt,[e("ul",Et,[(d(!0),u(D,null,le(p.items,(M,R)=>(d(),u("li",{key:R},y(M),1))),128))])])):A("",!0),p.subsections?.length?(d(),u("div",Mt,[(d(!0),u(D,null,le(p.subsections,(M,R)=>(d(),u("div",{key:R,class:"subcard"},[e("h3",At,y(M.title),1),e("ul",Rt,[(d(!0),u(D,null,le(M.items,(H,L)=>(d(),u("li",{key:L},y(H),1))),128))])]))),128))])):A("",!0)],8,$t)),64))])])]))}}),It=Te(Dt,[["__scopeId","data-v-6a8ff43d"]]),Lt={class:"seed-wrap"},Ot={class:"seed-header"},Bt={class:"seed-controls"},Ut=["onClick"],Vt={key:0,class:"panel"},Ft={key:1},Yt={class:"panel week-head"},zt={class:"week-left"},Wt={class:"seed-meta"},Kt={class:"seed-grid"},qt={class:"seed-card-top"},jt={class:"seed-card-title"},Gt={class:"badges"},Xt={class:"panel"},Ht={class:"status-grid"},Jt={class:"status-item"},Zt={class:"status-value"},Qt={class:"status-sub"},ea={class:"status-item"},ta={class:"status-value"},aa={class:"panel"},na={key:0,class:"desc"},sa={key:1,class:"locked"},la={class:"hint",style:{display:"block","margin-top":"6px"}},oa={class:"panel actions-row"},ia={class:"action-col"},ra=["href"],ua={class:"hint"},da={class:"action-col"},ca=["onClick"],va={class:"hint"},ma={class:"modal"},fa={class:"modal-head"},pa={key:0,class:"modal-sub"},ha={key:0,class:"status error"},ga={key:1,class:"status ok"},ya={class:"form-grid"},wa={class:"field full"},ba={class:"field"},ka={class:"field"},_a={class:"field"},Sa={class:"field"},$a={class:"field"},Ca={class:"field"},xa={class:"field"},Ta={class:"field"},Pa={class:"modal-actions"},Na=["disabled"],Ea={key:0},Ma={key:1},Aa="https://script.google.com/macros/s/AKfycbyJK333jg0bfKs67jGiRw4r-gxjj5ElrIO-tygb8YYoX0gYbxyosAHt8qoFafZYWVM/exec",Ra=Ce({__name:"DownloadSeeds",setup(s){const a=w(null),r=w("all"),f=w(new Date);let P=null;xe(async()=>{const _=await fetch("/data/releases.json",{cache:"no-store"});a.value=await _.json(),a.value&&(r.value=Y(a.value)),P=window.setInterval(()=>{f.value=new Date},1e3)}),Se(()=>{P&&window.clearInterval(P)});function S(_){const t=new Date(_);return Number.isNaN(t.getTime())?new Date(0):t}function T(_,t){return _===!0?!0:_===!1?!1:f.value.getTime()>=S(t).getTime()}function $(_){const t=S(_);return t.getTime()===0?"Unknown time":t.toLocaleString(void 0,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}function p(_){const t=S(_).getTime();return t===0?0:Math.max(0,t-f.value.getTime())}function M(_){if(_<=0)return"00:00:00";const t=Math.floor(_/1e3),i=Math.floor(t/86400),v=Math.floor(t%86400/3600),x=Math.floor(t%3600/60),m=t%60,N=String(v).padStart(2,"0"),b=String(x).padStart(2,"0"),X=String(m).padStart(2,"0");return i>0?`${i}d ${N}:${b}:${X}`:`${N}:${b}:${X}`}function R(_){const t=S(_).getTime();return t===0?!1:f.value.getTime()>=t}const H=K(()=>a.value?r.value==="all"?a.value.weeks:a.value.weeks.filter(_=>_.week===r.value):[]);function L(_){r.value=_}function Y(_){const t=[..._.weeks||[]].sort((v,x)=>x.week-v.week),i=t.find(v=>v.seeds?.some(x=>T(x.releases.forceDownload,x.releases.downloadAt)));return i?i.week:t[0]?.week??"all"}function z(_){const t=T(_.releases.forceDownload,_.releases.downloadAt),i=!R(_.deadlineAt);return t&&i}const oe=w(!1),O=w(null),re=w(""),ae=w(""),ee=w(""),J=w(null),E=w(null),U=w(""),k=w(""),c=w(null),h=w(null),I=w(!1),B=w(""),g=w("");function Z(_,t){O.value={week:_,seed:t},oe.value=!0,B.value="",g.value=""}function ne(){oe.value=!1,O.value=null,B.value="",g.value="",I.value=!1,re.value="",ae.value="",ee.value="",J.value=null,E.value=null,U.value="",k.value="",c.value=null,h.value=null}function Q(_){if(_==null||_==="")return null;const t=Number(_);return Number.isFinite(t)?Math.max(0,Math.floor(t)):null}const V=K(()=>!O.value||!z(O.value.seed)?!1:re.value.trim().length>0&&ae.value.trim().length>0&&ee.value.trim().length>0&&Q(J.value)!==null&&Q(E.value)!==null&&U.value.trim().length>0&&k.value.trim().length>0&&Q(c.value)!==null&&Q(h.value)!==null&&!I.value);async function pe(){if(B.value="",g.value="",!O.value){B.value="No seed selected.";return}if(!V.value){B.value="Please fill all fields.";return}I.value=!0;try{const _={week:O.value.week,seedId:O.value.seed.id,seedTitle:O.value.seed.title,teamName:re.value.trim(),p1Name:ae.value.trim(),p1Time:ee.value.trim(),p1Kills:Q(J.value),p1Deaths:Q(E.value),p2Name:U.value.trim(),p2Time:k.value.trim(),p2Kills:Q(c.value),p2Deaths:Q(h.value)},i=await(await fetch(Aa,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(_)})).json();if(!i?.ok)throw new Error(i?.error||"Submission failed");g.value="âœ… Submitted! Thanks."}catch(_){B.value=`âŒ ${_?.message||"Submission failed"}`}finally{I.value=!1}}return(_,t)=>(d(),u("div",Lt,[e("header",Ot,[t[10]||(t[10]=e("div",{class:"seed-title"},[e("h2",null,"Seed Releases"),e("p",{class:"seed-sub"}," Rules unlock first. Download unlocks later. Submit runs directly on the site once download is available. ")],-1)),e("div",Bt,[(d(!0),u(D,null,le(a.value?.weeks||[],i=>(d(),u("button",{key:i.week,class:de(["chip",{active:r.value===i.week}]),onClick:v=>L(i.week)}," Week "+y(i.week),11,Ut))),128)),e("button",{class:de(["chip",{active:r.value==="all"}]),onClick:t[0]||(t[0]=i=>L("all"))}," All Weeks ",2)])]),a.value?(d(),u("div",Ft,[(d(!0),u(D,null,le(H.value,i=>(d(),u("section",{key:i.week,style:{"margin-top":"16px"}},[e("div",Yt,[e("div",zt,[t[11]||(t[11]=e("span",{class:"dot"},null,-1)),e("strong",null,"Week "+y(i.week),1)]),e("span",Wt,y(i.seeds.length)+" seeds",1)]),e("div",Kt,[(d(!0),u(D,null,le(i.seeds,v=>(d(),u("article",{key:v.id,class:"seed-card"},[e("div",qt,[e("div",null,[e("h4",jt,y(v.title),1)]),e("div",Gt,[e("span",{class:de(["badge",{on:T(v.releases.forceDescription,v.releases.descriptionAt)}])}," Description ",2),e("span",{class:de(["badge",{on:T(v.releases.forceDownload,v.releases.downloadAt)}])}," Download ",2)])]),e("div",Xt,[e("div",Ht,[e("div",Jt,[t[12]||(t[12]=e("div",{class:"status-label"},"Download Unlock",-1)),e("div",Zt,[e("strong",null,y($(v.releases.downloadAt)),1)]),e("div",Qt,[T(v.releases.forceDownload,v.releases.downloadAt)?(d(),u(D,{key:0},[ie(" âœ… Download available ")],64)):(d(),u(D,{key:1},[ie(" â³ "+y(M(p(v.releases.downloadAt)))+" remaining ",1)],64))])]),e("div",ea,[t[13]||(t[13]=e("div",{class:"status-label"},"Seed Deadline",-1)),e("div",ta,[e("strong",null,y($(v.deadlineAt)),1)]),e("div",{class:de(["status-sub",{danger:R(v.deadlineAt)}])},[R(v.deadlineAt)?(d(),u(D,{key:0},[ie("â›” Deadline passed")],64)):(d(),u(D,{key:1},[ie("â³ "+y(M(p(v.deadlineAt)))+" remaining",1)],64))],2)])])]),e("div",aa,[T(v.releases.forceDescription,v.releases.descriptionAt)?(d(),u("div",na,y(v.descriptionText),1)):(d(),u("p",sa,[t[14]||(t[14]=ie(" Description unlocked at ",-1)),e("strong",null,y($(v.releases.descriptionAt)),1),e("span",la," â³ "+y(M(p(v.releases.descriptionAt)))+" remaining ",1)]))]),e("div",oa,[e("div",ia,[T(v.releases.forceDownload,v.releases.downloadAt)?(d(),u(D,{key:0},[e("a",{class:"btn",href:v.download.url,target:"_blank",rel:"noopener noreferrer"}," â¬‡ï¸ "+y(v.download.label),9,ra),t[15]||(t[15]=e("p",{class:"hint"},"Opens GitHub in a new tab.",-1))],64)):(d(),u(D,{key:1},[t[16]||(t[16]=e("button",{class:"btn disabled",disabled:""},"â¬‡ï¸ Download locked",-1)),e("p",ua,"Unlocks in "+y(M(p(v.releases.downloadAt))),1)],64))]),e("div",da,[z(v)?(d(),u(D,{key:0},[e("button",{class:"btn submit",onClick:x=>Z(i.week,v)}," ðŸ“ Submit Run ",8,ca),t[17]||(t[17]=e("p",{class:"hint"},"Submit directly on the site.",-1))],64)):(d(),u(D,{key:1},[t[18]||(t[18]=e("button",{class:"btn disabled",disabled:""},"ðŸ“ Submit locked",-1)),e("p",va,[R(v.deadlineAt)?(d(),u(D,{key:0},[ie("Deadline passed.")],64)):(d(),u(D,{key:1},[ie("Unlocks when download is released.")],64))])],64))])])]))),128))])]))),128))])):(d(),u("div",Vt," Loading seed releasesâ€¦ ")),oe.value?(d(),u("div",{key:2,class:"modal-backdrop",onClick:Fe(ne,["self"])},[e("div",ma,[e("div",fa,[e("div",null,[t[19]||(t[19]=e("div",{class:"modal-title"},"Submit Run",-1)),O.value?(d(),u("div",pa," Week "+y(O.value.week)+" â€¢ "+y(O.value.seed.title),1)):A("",!0)]),e("button",{class:"x",onClick:ne},"âœ•")]),B.value?(d(),u("div",ha,y(B.value),1)):A("",!0),g.value?(d(),u("div",ga,y(g.value),1)):A("",!0),e("div",ya,[e("div",wa,[t[20]||(t[20]=e("label",null,"Team Name *",-1)),q(e("input",{"onUpdate:modelValue":t[1]||(t[1]=i=>re.value=i),placeholder:"Example: The Crimson Chin"},null,512),[[se,re.value]])]),e("div",ba,[t[21]||(t[21]=e("label",null,"Player 1 Name *",-1)),q(e("input",{"onUpdate:modelValue":t[2]||(t[2]=i=>ae.value=i),placeholder:"Player 1"},null,512),[[se,ae.value]])]),e("div",ka,[t[22]||(t[22]=e("label",null,"Player 1 Time *",-1)),q(e("input",{"onUpdate:modelValue":t[3]||(t[3]=i=>ee.value=i),placeholder:"hh:mm:ss or mm:ss"},null,512),[[se,ee.value]])]),e("div",_a,[t[23]||(t[23]=e("label",null,"P1 Checks *",-1)),q(e("input",{"onUpdate:modelValue":t[4]||(t[4]=i=>J.value=i),type:"number",min:"0",placeholder:"0"},null,512),[[se,J.value,void 0,{number:!0}]])]),e("div",Sa,[t[24]||(t[24]=e("label",null,"P1 Deaths *",-1)),q(e("input",{"onUpdate:modelValue":t[5]||(t[5]=i=>E.value=i),type:"number",min:"0",placeholder:"0"},null,512),[[se,E.value,void 0,{number:!0}]])]),e("div",$a,[t[25]||(t[25]=e("label",null,"Player 2 Name *",-1)),q(e("input",{"onUpdate:modelValue":t[6]||(t[6]=i=>U.value=i),placeholder:"Player 2"},null,512),[[se,U.value]])]),e("div",Ca,[t[26]||(t[26]=e("label",null,"Player 2 Time *",-1)),q(e("input",{"onUpdate:modelValue":t[7]||(t[7]=i=>k.value=i),placeholder:"hh:mm:ss or mm:ss"},null,512),[[se,k.value]])]),e("div",xa,[t[27]||(t[27]=e("label",null,"P2 Checks *",-1)),q(e("input",{"onUpdate:modelValue":t[8]||(t[8]=i=>c.value=i),type:"number",min:"0",placeholder:"0"},null,512),[[se,c.value,void 0,{number:!0}]])]),e("div",Ta,[t[28]||(t[28]=e("label",null,"P2 Deaths *",-1)),q(e("input",{"onUpdate:modelValue":t[9]||(t[9]=i=>h.value=i),type:"number",min:"0",placeholder:"0"},null,512),[[se,h.value,void 0,{number:!0}]])])]),e("div",Pa,[e("button",{class:"btn2 ghost",onClick:ne},"Cancel"),e("button",{class:"btn2 primary",disabled:!V.value,onClick:pe},[I.value?(d(),u("span",Ma,"Submittingâ€¦")):(d(),u("span",Ea,"Submit"))],8,Na)])])])):A("",!0)]))}}),Da=Te(Ra,[["__scopeId","data-v-ab270777"]]),Ia={class:"wrap"},La={class:"signup-card"},Oa={class:"left"},Ba={class:"grid"},Ua={class:"field"},Va={class:"field"},Fa={class:"field"},Ya={class:"field"},za={class:"field full"},Wa={key:0,class:"status error"},Ka={key:1,class:"status ok"},qa={class:"right"},ja=["disabled"],Ga={key:0},Xa={key:1},Ha={class:"teams-card"},Ja={class:"teams-head"},Za={key:0,class:"mh-sub"},Qa={key:1,class:"mh-sub"},en={key:0,class:"empty"},tn={key:1,class:"teams-scroll"},an={class:"team-main"},nn={class:"team-text"},sn={key:0,class:"ts"},ln={class:"team-links"},on=["href"],rn=["href"],Qe="https://script.google.com/macros/s/AKfycbx5dLXFc2BYN6wmkl31qZvWDwcJLNqOiu82JwVJfW2YyqutX0VosVZPvkxIvCr1ysES/exec",un=Ce({__name:"SignUps",setup(s){const a=w(""),r=w(""),f=w(""),P=w(""),S=w(""),T=w(!1),$=w(""),p=w(""),M=w([]),R=w(!0);let H=null;function L(k){const c=(k||"").trim();if(!c)return"";const h=/^https?:\/\//i.test(c)?c:`https://${c}`;try{const I=new URL(h);if(I.hostname.toLowerCase().replace(/^www\./,"")!=="twitch.tv")return h;let g=I.pathname||"/";g=g.replace(/^\/+/,"/"),g=g.replace(/^\/(www\.)?twitch\.tv\//i,"/");const Z=g.split("/").filter(Boolean)[0]||"";return Z?`https://twitch.tv/${Z}`:"https://twitch.tv"}catch{return c}}function Y(k){const c=(k||"").trim();if(!c)return"";try{const h=new URL(/^https?:\/\//i.test(c)?c:`https://${c}`);if(h.hostname.toLowerCase().replace(/^www\./,"")!=="twitch.tv")return c;const B=h.pathname.split("/").filter(Boolean)[0];return B?`@${B}`:c}catch{return c}}function z(k){return String(k??"").trim().replace(/\s+/g," ")}function oe(k){return z(k).toLowerCase()}function O(k){if(!k)return 0;const h=new Date(k).getTime();return Number.isNaN(h)?0:h}function re(k){const c=oe(k.playerName),h=oe(k.teammateName),I=[c,h].sort().join("|");return`${oe(k.teamName)}::${I}`}function ae(k){const c=z(k.playerName)||"Player 1",h=z(k.teammateName)||"Player 2",I=z(k.teamName)||"TEAM";return`${c} & ${h} as "${I}"`}const ee=K(()=>z(a.value).length>0&&z(f.value).length>0&&z(S.value).length>0&&!T.value);async function J(){try{R.value=!0;const c=await(await fetch(Qe,{method:"GET",cache:"no-store"})).json();if(!c?.ok)throw new Error(c?.error||"Failed to load teams");M.value=c.teams||[]}catch(k){console.error(k)}finally{R.value=!1}}async function E(){if($.value="",p.value="",!ee.value){$.value="Please fill Player Name, Teammate Name, and Team Name.";return}T.value=!0;try{const k={playerName:z(a.value),playerTwitch:L(r.value),teammateName:z(f.value),teammateTwitch:L(P.value),teamName:z(S.value)},h=await(await fetch(Qe,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(k)})).json();if(!h?.ok)throw new Error(h?.error||"Submission failed");p.value="âœ… Signed up! Your team should appear below shortly.",a.value="",r.value="",f.value="",P.value="",S.value="",await J()}catch(k){$.value=`âŒ ${k?.message||"Submission failed"}`}finally{T.value=!1}}const U=K(()=>{const k=new Map;for(const c of M.value){const h=z(c.playerName),I=z(c.teammateName),B=z(c.teamName);if(!h||!I||!B)continue;const g=re({...c,playerName:h,teammateName:I,teamName:B}),Z=k.get(g);if(!Z)k.set(g,c);else{const ne=O(Z.timestamp);O(c.timestamp)>=ne&&k.set(g,c)}}return Array.from(k.values()).sort((c,h)=>O(h.timestamp)-O(c.timestamp))});return xe(async()=>{await J(),H=window.setInterval(J,15e3)}),Se(()=>{H&&window.clearInterval(H)}),(k,c)=>(d(),u("div",Ia,[e("div",La,[e("div",Oa,[c[10]||(c[10]=e("h2",{class:"title"},"Team Sign Up",-1)),c[11]||(c[11]=e("p",{class:"sub"},"Enter your duo info",-1)),e("div",Ba,[e("div",Ua,[c[5]||(c[5]=e("label",null,"Player Name *",-1)),q(e("input",{"onUpdate:modelValue":c[0]||(c[0]=h=>a.value=h),placeholder:"Player 1"},null,512),[[se,a.value]])]),e("div",Va,[c[6]||(c[6]=e("label",null,"Player Twitch",-1)),q(e("input",{"onUpdate:modelValue":c[1]||(c[1]=h=>r.value=h),placeholder:"Paste your Twitch URL (https://twitch.tv/yourname)"},null,512),[[se,r.value]])]),e("div",Fa,[c[7]||(c[7]=e("label",null,"Teammate Name *",-1)),q(e("input",{"onUpdate:modelValue":c[2]||(c[2]=h=>f.value=h),placeholder:"Player 2"},null,512),[[se,f.value]])]),e("div",Ya,[c[8]||(c[8]=e("label",null,"Teammate Twitch",-1)),q(e("input",{"onUpdate:modelValue":c[3]||(c[3]=h=>P.value=h),placeholder:"Paste teammate Twitch URL"},null,512),[[se,P.value]])]),e("div",za,[c[9]||(c[9]=e("label",null,"Team Name *",-1)),q(e("input",{"onUpdate:modelValue":c[4]||(c[4]=h=>S.value=h),placeholder:"Example: The Crimson Chin"},null,512),[[se,S.value]])])]),$.value?(d(),u("p",Wa,y($.value),1)):A("",!0),p.value?(d(),u("p",Ka,y(p.value),1)):A("",!0)]),e("div",qa,[e("button",{class:de(["btn",{loading:T.value}]),disabled:!ee.value,onClick:E},[T.value?(d(),u("span",Xa,"Signing upâ€¦")):(d(),u("span",Ga,"Sign Up"))],10,ja),c[12]||(c[12]=e("p",{class:"hint"},"Required: Player Name, Teammate Name, Team Name",-1))])]),e("div",Ha,[e("div",Ja,[c[14]||(c[14]=e("div",{class:"dot"},null,-1)),e("div",null,[c[13]||(c[13]=e("div",{class:"mh-title"},"Signed Up Teams",-1)),R.value?(d(),u("div",Za,"Loadingâ€¦")):(d(),u("div",Qa,y(U.value.length)+" teams",1))])]),U.value.length===0&&!R.value?(d(),u("div",en," No teams yet â€” be the first ðŸ‘€ ")):(d(),u("div",tn,[(d(!0),u(D,null,le(U.value,(h,I)=>(d(),u("div",{class:"team-row",key:re(h)+":"+I},[e("div",an,[e("span",nn,y(ae(h)),1),h.timestamp?(d(),u("span",sn,"("+y(new Date(h.timestamp).toLocaleString())+")",1)):A("",!0)]),e("div",ln,[h.playerTwitch?(d(),u("a",{key:0,class:"pill-link",href:L(h.playerTwitch),target:"_blank",rel:"noopener noreferrer"}," Player 1: "+y(Y(L(h.playerTwitch))),9,on)):A("",!0),h.teammateTwitch?(d(),u("a",{key:1,class:"pill-link",href:L(h.teammateTwitch),target:"_blank",rel:"noopener noreferrer"}," Player 2: "+y(Y(L(h.teammateTwitch))),9,rn)):A("",!0)])]))),128))]))])]))}}),dn=Te(un,[["__scopeId","data-v-5f21764b"]]);var G=function(){return G=Object.assign||function(a){for(var r,f=1,P=arguments.length;f<P;f++){r=arguments[f];for(var S in r)Object.prototype.hasOwnProperty.call(r,S)&&(a[S]=r[S])}return a},G.apply(this,arguments)};typeof window<"u"&&(window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),typeof window.CustomEvent!="function"&&(window.CustomEvent=function(a,r){r=r||{bubbles:!1,cancelable:!1,detail:null};var f=document.createEvent("CustomEvent");return f.initCustomEvent(a,r.bubbles,r.cancelable,r.detail),f}));var cn=typeof document<"u"&&!!document.documentMode,Ie;function vn(){return Ie||(Ie=document.createElement("div").style)}var et=["webkit","moz","ms"],Ne={};function ze(s){if(Ne[s])return Ne[s];var a=vn();if(s in a)return Ne[s]=s;for(var r=s[0].toUpperCase()+s.slice(1),f=et.length;f--;){var P="".concat(et[f]).concat(r);if(P in a)return Ne[s]=P}}function Ee(s,a){return parseFloat(a[ze(s)])||0}function Me(s,a,r){r===void 0&&(r=window.getComputedStyle(s));var f=a==="border"?"Width":"";return{left:Ee("".concat(a,"Left").concat(f),r),right:Ee("".concat(a,"Right").concat(f),r),top:Ee("".concat(a,"Top").concat(f),r),bottom:Ee("".concat(a,"Bottom").concat(f),r)}}function ge(s,a,r){s.style[ze(a)]=r}function mn(s,a){var r=ze("transform");ge(s,"transition","".concat(r," ").concat(a.duration,"ms ").concat(a.easing))}function fn(s,a,r){var f=a.x,P=a.y,S=a.scale,T=a.isSVG;if(ge(s,"transform","scale(".concat(S,") translate(").concat(f,"px, ").concat(P,"px)")),T&&cn){var $=window.getComputedStyle(s).getPropertyValue("transform");s.setAttribute("transform",$)}}function Le(s){var a=s.parentNode,r=window.getComputedStyle(s),f=window.getComputedStyle(a),P=s.getBoundingClientRect(),S=a.getBoundingClientRect();return{elem:{style:r,width:P.width,height:P.height,top:P.top,bottom:P.bottom,left:P.left,right:P.right,margin:Me(s,"margin",r),border:Me(s,"border",r)},parent:{style:f,width:S.width,height:S.height,top:S.top,bottom:S.bottom,left:S.left,right:S.right,padding:Me(a,"padding",f),border:Me(a,"border",f)}}}var $e={down:"mousedown",move:"mousemove",up:"mouseup mouseleave"};typeof window<"u"&&(typeof window.PointerEvent=="function"?$e={down:"pointerdown",move:"pointermove",up:"pointerup pointerleave pointercancel"}:typeof window.TouchEvent=="function"&&($e={down:"touchstart",move:"touchmove",up:"touchend touchcancel"}));function Oe(s,a,r,f){$e[s].split(" ").forEach(function(P){a.addEventListener(P,r,f)})}function Be(s,a,r){$e[s].split(" ").forEach(function(f){a.removeEventListener(f,r)})}function at(s,a){for(var r=s.length;r--;)if(s[r].pointerId===a.pointerId)return r;return-1}function Ye(s,a){var r;if(a.touches){r=0;for(var f=0,P=a.touches;f<P.length;f++){var S=P[f];S.pointerId=r++,Ye(s,S)}return}r=at(s,a),r>-1&&s.splice(r,1),s.push(a)}function pn(s,a){if(a.touches){for(;s.length;)s.pop();return}var r=at(s,a);r>-1&&s.splice(r,1)}function tt(s){s=s.slice(0);for(var a=s.pop(),r;r=s.pop();)a={clientX:(r.clientX-a.clientX)/2+a.clientX,clientY:(r.clientY-a.clientY)/2+a.clientY};return a}function Ue(s){if(s.length<2)return 0;var a=s[0],r=s[1];return Math.sqrt(Math.pow(Math.abs(r.clientX-a.clientX),2)+Math.pow(Math.abs(r.clientY-a.clientY),2))}function hn(s){for(var a=s;a&&a.parentNode;){if(a.parentNode===document)return!0;a=a.parentNode instanceof ShadowRoot?a.parentNode.host:a.parentNode}return!1}function gn(s){return(s.getAttribute("class")||"").trim()}function yn(s,a){return s.nodeType===1&&" ".concat(gn(s)," ").indexOf(" ".concat(a," "))>-1}function wn(s,a){for(var r=s;r!=null;r=r.parentNode)if(yn(r,a.excludeClass)||a.exclude.indexOf(r)>-1)return!0;return!1}var bn=/^http:[\w\.\/]+svg$/;function kn(s){return bn.test(s.namespaceURI)&&s.nodeName.toLowerCase()!=="svg"}function _n(s){var a={};for(var r in s)s.hasOwnProperty(r)&&(a[r]=s[r]);return a}var nt={animate:!1,canvas:!1,cursor:"move",disablePan:!1,disableZoom:!1,disableXAxis:!1,disableYAxis:!1,duration:200,easing:"ease-in-out",exclude:[],excludeClass:"panzoom-exclude",handleStartEvent:function(s){s.preventDefault(),s.stopPropagation()},maxScale:4,minScale:.125,overflow:"hidden",panOnlyWhenZoomed:!1,pinchAndPan:!1,relative:!1,setTransform:fn,startX:0,startY:0,startScale:1,step:.3,touchAction:"none"};function st(s,a){if(!s)throw new Error("Panzoom requires an element as an argument");if(s.nodeType!==1)throw new Error("Panzoom requires an element with a nodeType of 1");if(!hn(s))throw new Error("Panzoom should be called on elements that have been attached to the DOM");a=G(G({},nt),a);var r=kn(s),f=s.parentNode;f.style.overflow=a.overflow,f.style.userSelect="none",f.style.touchAction=a.touchAction,(a.canvas?f:s).style.cursor=a.cursor,s.style.userSelect="none",s.style.touchAction=a.touchAction,ge(s,"transformOrigin",typeof a.origin=="string"?a.origin:r?"0 0":"50% 50%");function P(){f.style.overflow="",f.style.userSelect="",f.style.touchAction="",f.style.cursor="",s.style.cursor="",s.style.userSelect="",s.style.touchAction="",ge(s,"transformOrigin","")}function S(t){t===void 0&&(t={});for(var i in t)t.hasOwnProperty(i)&&(a[i]=t[i]);(t.hasOwnProperty("cursor")||t.hasOwnProperty("canvas"))&&(f.style.cursor=s.style.cursor="",(a.canvas?f:s).style.cursor=a.cursor),t.hasOwnProperty("overflow")&&(f.style.overflow=t.overflow),t.hasOwnProperty("touchAction")&&(f.style.touchAction=t.touchAction,s.style.touchAction=t.touchAction)}var T=0,$=0,p=1,M=!1;oe(a.startScale,{animate:!1,force:!0}),setTimeout(function(){z(a.startX,a.startY,{animate:!1,force:!0})});function R(t,i,v){if(!v.silent){var x=new CustomEvent(t,{detail:i});s.dispatchEvent(x)}}function H(t,i,v){var x={x:T,y:$,scale:p,isSVG:r,originalEvent:v};return requestAnimationFrame(function(){typeof i.animate=="boolean"&&(i.animate?mn(s,i):ge(s,"transition","none")),i.setTransform(s,x,i),R(t,x,i),R("panzoomchange",x,i)}),x}function L(t,i,v,x){var m=G(G({},a),x),N={x:T,y:$,opts:m};if(!x?.force&&(m.disablePan||m.panOnlyWhenZoomed&&p===m.startScale))return N;if(t=parseFloat(t),i=parseFloat(i),m.disableXAxis||(N.x=(m.relative?T:0)+t),m.disableYAxis||(N.y=(m.relative?$:0)+i),m.contain){var b=Le(s),X=b.elem.width/p,j=b.elem.height/p,me=X*v,fe=j*v,F=(me-X)/2,ue=(fe-j)/2;if(m.contain==="inside"){var he=(-b.elem.margin.left-b.parent.padding.left+F)/v,ye=(b.parent.width-me-b.parent.padding.left-b.elem.margin.left-b.parent.border.left-b.parent.border.right+F)/v;N.x=Math.max(Math.min(N.x,ye),he);var we=(-b.elem.margin.top-b.parent.padding.top+ue)/v,be=(b.parent.height-fe-b.parent.padding.top-b.elem.margin.top-b.parent.border.top-b.parent.border.bottom+ue)/v;N.y=Math.max(Math.min(N.y,be),we)}else if(m.contain==="outside"){var he=(-(me-b.parent.width)-b.parent.padding.left-b.parent.border.left-b.parent.border.right+F)/v,ye=(F-b.parent.padding.left)/v;N.x=Math.max(Math.min(N.x,ye),he);var we=(-(fe-b.parent.height)-b.parent.padding.top-b.parent.border.top-b.parent.border.bottom+ue)/v,be=(ue-b.parent.padding.top)/v;N.y=Math.max(Math.min(N.y,be),we)}}return m.roundPixels&&(N.x=Math.round(N.x),N.y=Math.round(N.y)),N}function Y(t,i){var v=G(G({},a),i),x={scale:p,opts:v};if(!i?.force&&v.disableZoom)return x;var m=a.minScale,N=a.maxScale;if(v.contain){var b=Le(s),X=b.elem.width/p,j=b.elem.height/p;if(X>1&&j>1){var me=b.parent.width-b.parent.border.left-b.parent.border.right,fe=b.parent.height-b.parent.border.top-b.parent.border.bottom,F=me/X,ue=fe/j;a.contain==="inside"?N=Math.min(N,F,ue):a.contain==="outside"&&(m=Math.max(m,F,ue))}}return x.scale=Math.min(Math.max(t,m),N),x}function z(t,i,v,x){var m=L(t,i,p,v);return T!==m.x||$!==m.y?(T=m.x,$=m.y,H("panzoompan",m.opts,x)):{x:T,y:$,scale:p,isSVG:r,originalEvent:x}}function oe(t,i,v){var x=Y(t,i),m=x.opts;if(!(!i?.force&&m.disableZoom)){t=x.scale;var N=T,b=$;if(m.focal){var X=m.focal;N=(X.x/t-X.x/p+T*t)/t,b=(X.y/t-X.y/p+$*t)/t}var j=L(N,b,t,{relative:!1,force:!0});return T=j.x,$=j.y,p=t,H("panzoomzoom",m,v)}}function O(t,i){var v=G(G(G({},a),{animate:!0}),i);return oe(p*Math.exp((t?1:-1)*v.step),v)}function re(t){return O(!0,t)}function ae(t){return O(!1,t)}function ee(t,i,v,x){var m=Le(s),N={width:m.parent.width-m.parent.padding.left-m.parent.padding.right-m.parent.border.left-m.parent.border.right,height:m.parent.height-m.parent.padding.top-m.parent.padding.bottom-m.parent.border.top-m.parent.border.bottom},b=i.clientX-m.parent.left-m.parent.padding.left-m.parent.border.left-m.elem.margin.left,X=i.clientY-m.parent.top-m.parent.padding.top-m.parent.border.top-m.elem.margin.top;r||(b-=m.elem.width/p/2,X-=m.elem.height/p/2);var j={x:b/N.width*(N.width*t),y:X/N.height*(N.height*t)};return oe(t,G(G({},v),{animate:!1,focal:j}),x)}function J(t,i){t.preventDefault();var v=G(G(G({},a),i),{animate:!1}),x=t.deltaY===0&&t.deltaX?t.deltaX:t.deltaY,m=x<0?1:-1,N=Y(p*Math.exp(m*v.step/3),v).scale;return ee(N,t,v,t)}function E(t){var i=G(G(G({},a),{animate:!0,force:!0}),t);p=Y(i.startScale,i).scale;var v=L(i.startX,i.startY,p,i);return T=v.x,$=v.y,H("panzoomreset",i)}var U,k,c,h,I,B,g=[];function Z(t){if(!wn(t.target,a)){Ye(g,t),M=!0,a.handleStartEvent(t),U=T,k=$,R("panzoomstart",{x:T,y:$,scale:p,isSVG:r,originalEvent:t},a);var i=tt(g);c=i.clientX,h=i.clientY,I=p,B=Ue(g)}}function ne(t){if(!(!M||U===void 0||k===void 0||c===void 0||h===void 0)){Ye(g,t);var i=tt(g),v=g.length>1,x=p;if(v){B===0&&(B=Ue(g));var m=Ue(g)-B;x=Y(m*a.step/80+I).scale,ee(x,i,{animate:!1},t)}(!v||a.pinchAndPan)&&z(U+(i.clientX-c)/x,k+(i.clientY-h)/x,{animate:!1},t)}}function Q(t){g.length===1&&R("panzoomend",{x:T,y:$,scale:p,isSVG:r,originalEvent:t},a),pn(g,t),M&&(M=!1,U=k=c=h=void 0)}var V=!1;function pe(){V||(V=!0,Oe("down",a.canvas?f:s,Z),Oe("move",document,ne,{passive:!0}),Oe("up",document,Q,{passive:!0}))}function _(){V=!1,Be("down",a.canvas?f:s,Z),Be("move",document,ne),Be("up",document,Q)}return a.noBind||pe(),{bind:pe,destroy:_,eventNames:$e,getPan:function(){return{x:T,y:$}},getScale:function(){return p},getOptions:function(){return _n(a)},handleDown:Z,handleMove:ne,handleUp:Q,pan:z,reset:E,resetStyle:P,setOptions:S,setStyle:function(t,i){return ge(s,t,i)},zoom:oe,zoomIn:re,zoomOut:ae,zoomToPoint:ee,zoomWithWheel:J}}st.defaultOptions=nt;const Sn={class:"map-wrap"},$n={class:"topbar"},Cn={class:"left"},xn={class:"title"},Tn={class:"title-text"},Pn={class:"sub"},Nn={key:0},En={class:"controls"},Mn=["value"],An=["value"],Rn=["value"],Dn={class:"toggle"},In={key:0,class:"placement-hint"},Ln={key:0,class:"copied"},On={class:"right"},Bn={key:0,class:"status"},Un={key:1,class:"status error"},Vn={class:"panzoom-root"},Fn=["src"],Yn={key:0,class:"route-svg",viewBox:"0 0 100 100",preserveAspectRatio:"none"},zn=["points"],Wn=["title"],Kn=["onClick","title"],qn={class:"legend"},jn={key:0,class:"legend-row"},Gn={key:0,class:"drawer"},Xn={key:0,class:"route-panel"},Hn={class:"route-head"},Jn={class:"route-sub"},Zn={class:"toggle route-toggle"},Qn={class:"route-list"},es=["onClick"],ts={class:"idx"},as={class:"name"},ns={key:0,class:"locmark"},ss={key:0,class:"loc"},ls={key:1,class:"tag kindling"},os={key:2,class:"tag done"},is={class:"drawer-head"},rs={class:"drawer-title"},us={class:"name"},ds={key:0,class:"loc"},cs={class:"drawer-body"},vs={class:"pill-row"},ms={key:0,class:"pill"},fs={key:0,class:"desc"},ps={class:"actions"},hs={key:1,class:"note"},gs={key:2,class:"drawer-head"},ys={class:"drawer-title"},ws={class:"loc"},Ve=1,bs="/data/dlcRoutes.json",ks=Ce({__name:"Map",props:{mapSrc:{},dataUrl:{default:"/data/dlcChecks.json"},checks:{default:void 0},startPlacementMode:{type:Boolean,default:!1},categoryOrder:{default:void 0},maxScale:{default:5},minScale:{default:.4},startShrink:{default:1},fitPadding:{default:0},startYOffset:{default:650}},setup(s){const a=s,r=K(()=>{const o=(a.mapSrc||"map").replace(/[^a-z0-9_-]/gi,"_");return`dlcChecksProgress:v${Ve}:${o}:${p.value}`});function f(){try{const o=localStorage.getItem(r.value);if(!o)return null;const n=JSON.parse(o);return!n||n.v!==Ve||!n.checks?null:n}catch{return null}}function P(){try{const o={v:Ve,updatedAt:Date.now(),checks:Object.fromEntries(E.value.filter(n=>!V(n)).map(n=>[n.id,{done:!!n.done,kindling:!!n.kindling}]))};localStorage.setItem(r.value,JSON.stringify(o))}catch{}}function S(){const o=f();if(!o)return;const n=o.checks;E.value=E.value.map(l=>{if(V(l))return l;const C=n[l.id];return C?{...l,done:!!C.done,kindling:!!C.kindling}:l})}function T(){try{localStorage.removeItem(r.value)}catch{}E.value=E.value.map(o=>V(o)?o:{...o,done:!1,kindling:!1})}const $=w([{id:"all",label:"All Checks",url:""},{id:"defaultSeed",label:"Default Checks",url:"/data/dlcSeeds/default.json"},{id:"seed1",label:"Seed 1 Checklist",url:"/data/dlcSeeds/seed1.json"}]),p=w("seed1"),M=w(null),R=w(!0),H=w([]),L=w(""),Y=K(()=>H.value.find(o=>o.routeId===L.value)??null),z=K(()=>Y.value?R.value?j.value:j.value.filter(o=>!V(o)):[]),oe=K(()=>!Y.value||!R.value?[]:j.value.filter(o=>V(o))),O=w(null),re=w(null),ae=w(null),ee=w(!1),J=w(""),E=w([]),U=w(null),k=w(!!a.startPlacementMode),c=w(""),h=w(""),I=w("all"),B=w(!0);let g=null,Z=null,ne=0;const Q=w(null);function V(o){return(o.category||"").toLowerCase()==="location"}async function pe(){J.value="",ee.value=!0;try{if(a.checks?.length){E.value=a.checks.map(C=>({...C,done:!!C.done,kindling:!!C.kindling}));return}const o=await fetch(a.dataUrl,{cache:"no-store"});if(!o.ok)throw new Error(`Failed to load checks: ${o.status}`);const n=await o.json(),l=Array.isArray(n)?n:n.checks;E.value=(l||[]).map(C=>({...C,done:!!C.done,kindling:!!C.kindling})),S()}catch(o){J.value=o?.message??"Failed to load checks."}finally{ee.value=!1}}Pe(p,async()=>{await i(),U.value=null,S()});let _=null;function t(){_&&window.clearTimeout(_),_=window.setTimeout(()=>{_=null,P()},250)}Pe(E,()=>{t()},{deep:!0}),Se(()=>{_&&window.clearTimeout(_)});async function i(){M.value=null;const o=$.value.find(n=>n.id===p.value);if(!(!o||!o.url))try{const n=await fetch(o.url,{cache:"no-store"});if(!n.ok)throw new Error(`Failed to load seed list: ${n.status}`);M.value=await n.json()}catch(n){J.value=n?.message??"Failed to load seed list."}}async function v(){try{const o=await fetch(bs,{cache:"no-store"});if(!o.ok)throw new Error(`Failed to load routes: ${o.status}`);const n=await o.json();H.value=Array.isArray(n)?n:n.routes}catch(o){console.warn(o?.message??"Failed to load routes"),H.value=[]}}const x=K(()=>{if(p.value==="all"||!M.value)return E.value;const o=new Set(M.value.checkIds),n=E.value.filter(te=>o.has(te.id)),l=M.value.defaultCount;if(!l||n.length<=l)return n;const C=new Map(n.map(te=>[te.id,te]));return M.value.checkIds.map(te=>C.get(te)).filter(Boolean).slice(0,l)}),m=K(()=>x.value.filter(o=>!V(o)));K(()=>x.value.filter(o=>V(o)));const N=K(()=>{const o=new Set;for(const C of m.value)C.category&&o.add(C.category);const n=Array.from(o).sort((C,W)=>C.localeCompare(W));if(!a.categoryOrder?.length)return n;const l=a.categoryOrder.filter(C=>o.has(C));for(const C of n)l.includes(C)||l.push(C);return l}),b=K(()=>{const o=h.value.trim().toLowerCase();return m.value.filter(n=>!B.value&&(n.done||n.kindling)||I.value!=="all"&&(n.category||"")!==I.value?!1:o?`${n.name} ${n.locationName??""} ${n.description??""}`.toLowerCase().includes(o):!0)}),X=K(()=>m.value.filter(o=>o.done||o.kindling).length),j=K(()=>{const o=Y.value;if(!o)return[];const n=new Map(E.value.map(l=>[l.id,l]));return o.checkIds.map(l=>n.get(l)).filter(Boolean)}),me=K(()=>j.value.map(o=>`${o.x},${o.y}`).join(" ")),fe=K(()=>Y.value?j.value.filter(o=>!V(o)):b.value);K(()=>Y.value?j.value.filter(o=>V(o)):[]);const F=K(()=>U.value?E.value.find(o=>o.id===U.value)??null:null);function ue(o){U.value=o}function he(){U.value=null,L.value=""}function ye(o){const n=E.value.findIndex(l=>l.id===o);n!==-1&&(V(E.value[n])||(E.value[n]={...E.value[n],done:!E.value[n].done}))}function we(o){const n=E.value.findIndex(C=>C.id===o);if(n===-1||V(E.value[n]))return;const l=E.value[n];E.value[n]={...l,kindling:!l.kindling}}const be=K(()=>m.value.filter(o=>!!o.kindling).length);function lt(o){const n=ae.value;if(!n)return null;const l=n.getBoundingClientRect(),C=(o.clientX-l.left)/l.width,W=(o.clientY-l.top)/l.height,te=Math.max(0,Math.min(100,C*100)),ce=Math.max(0,Math.min(100,W*100));return{x:te,y:ce}}async function ot(o){if(!k.value)return;const n=lt(o);if(!n)return;const l=`{ "x": ${n.x.toFixed(2)}, "y": ${n.y.toFixed(2)} }`;c.value=l;try{await navigator.clipboard.writeText(l)}catch{}}function Re(o){const n=O.value,l=ae.value;if(!g||!n||!l||o!==ne)return;const C=n.getBoundingClientRect(),W=l.getBoundingClientRect();let te=0,ce=0;if(W.left>C.left&&(te=C.left-W.left),W.right<C.right&&(te=C.right-W.right),W.top>C.top&&(ce=C.top-W.top),W.bottom<C.bottom&&(ce=C.bottom-W.bottom),te!==0||ce!==0){const ke=g.getPan();g.pan(ke.x+te,ke.y+ce,{relative:!1,force:!0,animate:!1})}}function We(o=!0,n=!0){const l=ae.value,C=O.value;if(!g||!l||!C)return;const W=++ne,te=l.naturalWidth||1,ce=l.naturalHeight||1,ke=C.getBoundingClientRect(),qe=Math.max(1,ke.width),je=Math.max(1,ke.height),ut=Math.max(qe/te,je/ce);g.pan(0,0,{relative:!1,force:!0,animate:!1});const Ge=g.getScale();Ge!==1&&g.zoom(1/Ge,{force:!0,animate:!1}),g.zoom(ut/g.getScale(),{force:!0,animate:!1});const Xe=g.getScale(),dt=te*Xe,ct=ce*Xe;let vt=(qe-dt)/2,mt=(je-ct)/2;g.pan(Math.round(vt),Math.round(mt),{relative:!1,force:!0,animate:!1}),requestAnimationFrame(()=>{if(W!==ne)return;Re(W);const He=a.startYOffset??0;if(He){const ve=g.getPan();g.pan(ve.x,ve.y-He,{relative:!1,force:!0,animate:!1})}requestAnimationFrame(()=>{W===ne&&(Re(W),requestAnimationFrame(()=>{if(W===ne){if(Re(W),n){const ve=g.getPan();Q.value={scale:g.getScale(),x:ve.x,y:ve.y}}if(o){const ve=g.getPan();g.pan(ve.x,ve.y,{relative:!1,force:!0,animate:!0})}}}))})})}function it(){if(!g||!Q.value){We(!0,!0);return}const o=Q.value,n=o.scale/g.getScale();g.zoom(n,{force:!0,animate:!0}),g.pan(o.x,o.y,{relative:!1,force:!0,animate:!0})}function rt(){const o=re.value,n=O.value;!o||!n||(Ke(),g=st(o,{maxScale:a.maxScale,minScale:a.minScale,contain:void 0,cursor:"grab"}),Z=l=>{g&&(l.ctrlKey||(l.preventDefault(),g.zoomWithWheel(l)))},n.addEventListener("wheel",Z,{passive:!1}))}function Ke(){const o=O.value;if(o&&Z&&o.removeEventListener("wheel",Z),Z=null,g){try{g.destroy()}catch{}g=null}}return Pe(p,async()=>{await i(),U.value=null}),Pe(L,()=>{U.value=null}),xe(async()=>{await pe(),await i(),await v(),await ft(),rt();const o=ae.value;if(!o)return;const n=()=>{We(!1,!0),requestAnimationFrame(()=>it())};o.complete?n():o.addEventListener("load",n,{once:!0})}),Se(()=>{Ke()}),(o,n)=>(d(),u("div",Sn,[e("div",$n,[e("div",Cn,[e("div",xn,[n[10]||(n[10]=e("span",{class:"spark"},"ðŸ§­",-1)),e("div",Tn,[n[9]||(n[9]=e("div",{class:"h1"},"DLC Checks Map (WIP)",-1)),e("div",Pn,[ie(y(X.value)+"/"+y(m.value.length)+" completed â€¢ ðŸ”¥ "+y(be.value)+" Kindling Shards ",1),b.value.length!==m.value.length?(d(),u("span",Nn," â€¢ showing "+y(b.value.length),1)):A("",!0)])])]),e("div",En,[q(e("input",{"onUpdate:modelValue":n[0]||(n[0]=l=>h.value=l),class:"input",type:"text",placeholder:"Search checksâ€¦"},null,512),[[se,h.value]]),q(e("select",{"onUpdate:modelValue":n[1]||(n[1]=l=>p.value=l),class:"select"},[(d(!0),u(D,null,le($.value,l=>(d(),u("option",{key:l.id,value:l.id},y(l.label),9,Mn))),128))],512),[[De,p.value]]),q(e("select",{"onUpdate:modelValue":n[2]||(n[2]=l=>I.value=l),class:"select"},[n[11]||(n[11]=e("option",{value:"all"},"All categories",-1)),(d(!0),u(D,null,le(N.value,l=>(d(),u("option",{key:l,value:l},y(l),9,An))),128))],512),[[De,I.value]]),e("button",{class:"btn",onClick:T,title:"Clear saved progress"}," Clear Progress "),q(e("select",{"onUpdate:modelValue":n[3]||(n[3]=l=>L.value=l),class:"select"},[n[12]||(n[12]=e("option",{value:""},"No route (show all)",-1)),(d(!0),u(D,null,le(H.value,l=>(d(),u("option",{key:l.routeId,value:l.routeId},y(l.label),9,Rn))),128))],512),[[De,L.value]]),e("label",Dn,[q(e("input",{"onUpdate:modelValue":n[4]||(n[4]=l=>B.value=l),type:"checkbox"},null,512),[[Je,B.value]]),n[13]||(n[13]=e("span",null,"Show completed",-1))])]),k.value?(d(),u("div",In,[n[14]||(n[14]=e("b",null,"Placement mode:",-1)),n[15]||(n[15]=ie(" click the map to copy coordinates. ",-1)),c.value?(d(),u("span",Ln,"Copied: "+y(c.value),1)):A("",!0)])):A("",!0)]),e("div",On,[ee.value?(d(),u("div",Bn,"Loading checksâ€¦")):J.value?(d(),u("div",Un,"âŒ "+y(J.value),1)):A("",!0)])]),e("div",{ref_key:"containerEl",ref:O,class:de(["map-viewport",{placing:k.value}]),onClick:ot},[e("div",Vn,[e("div",{ref_key:"panzoomEl",ref:re,class:"map-layer"},[e("img",{ref_key:"imgEl",ref:ae,class:"map-img",src:o.mapSrc,alt:"DLC map"},null,8,Fn),Y.value&&j.value.length>=2?(d(),u("svg",Yn,[e("polyline",{class:"route-line",points:me.value},null,8,zn)])):A("",!0),(d(!0),u(D,null,le(oe.value,l=>(d(),u("button",{key:l.id,class:"waypoint",style:Ze({left:l.x+"%",top:l.y+"%"}),onClick:n[5]||(n[5]=Fe(()=>{},["stop"])),title:l.name}," â›³ ",12,Wn))),128)),(d(!0),u(D,null,le(fe.value,l=>(d(),u("button",{key:l.id,class:de(["pin",{done:!!l.done,kindling:!!l.kindling,selected:U.value===l.id,inRoute:!!Y.value}]),style:Ze({left:l.x+"%",top:l.y+"%"}),onClick:Fe(C=>ue(l.id),["stop"]),title:l.locationName?`${l.name} â€” ${l.locationName}`:l.name},n[16]||(n[16]=[e("span",{class:"dot"},null,-1)]),14,Kn))),128))],512)]),e("div",qn,[n[18]||(n[18]=Ae('<div class="legend-row" data-v-0336f160><span class="legend-dot" data-v-0336f160></span><span data-v-0336f160>Incomplete</span></div><div class="legend-row" data-v-0336f160><span class="legend-dot done" data-v-0336f160></span><span data-v-0336f160>Completed</span></div><div class="legend-row" data-v-0336f160><span class="legend-dot kindling" data-v-0336f160></span><span data-v-0336f160>Kindling</span></div>',3)),Y.value&&R.value?(d(),u("div",jn,n[17]||(n[17]=[e("span",{class:"legend-flag"},"â›³",-1),e("span",null,"Route waypoint",-1)]))):A("",!0)])],2),_e(pt,{name:"slide"},{default:ht(()=>[F.value||Y.value?(d(),u("aside",Gn,[Y.value?(d(),u("div",Xn,[e("div",Hn,[n[20]||(n[20]=e("div",{class:"route-title"},"Route",-1)),e("div",Jn,y(Y.value.label)+" â€¢ "+y(j.value.length)+" items",1),e("label",Zn,[q(e("input",{"onUpdate:modelValue":n[6]||(n[6]=l=>R.value=l),type:"checkbox"},null,512),[[Je,R.value]]),n[19]||(n[19]=e("span",null,"Show locations",-1))])]),e("ol",Qn,[(d(!0),u(D,null,le(z.value,(l,C)=>(d(),u("li",{key:l.id,class:de(["route-item",{isLocation:V(l),active:U.value===l.id}]),onClick:W=>ue(l.id)},[e("span",ts,y(C+1),1),e("span",as,[V(l)?(d(),u("span",ns,"â›³")):A("",!0),ie(" "+y(l.name),1)]),l.locationName?(d(),u("span",ss,"â€” "+y(l.locationName),1)):A("",!0),!V(l)&&l.kindling?(d(),u("span",ls,"Kindling")):!V(l)&&l.done?(d(),u("span",os,"Done")):A("",!0)],10,es))),128))])])):A("",!0),F.value?(d(),u(D,{key:1},[e("div",is,[e("div",rs,[e("div",us,y(F.value.name),1),F.value.locationName?(d(),u("div",ds,y(F.value.locationName),1)):A("",!0)]),e("button",{class:"icon-btn",onClick:he,"aria-label":"Close"},"âœ•")]),e("div",cs,[e("div",vs,[F.value.category?(d(),u("span",ms,y(F.value.category),1)):A("",!0)]),F.value.description?(d(),u("p",fs,y(F.value.description),1)):A("",!0),e("div",ps,[V(F.value)?A("",!0):(d(),u(D,{key:0},[e("button",{class:"btn primary",onClick:n[7]||(n[7]=l=>ye(F.value.id))},y(F.value.done?"Mark incomplete":"Mark complete"),1),e("button",{class:"btn kindling",onClick:n[8]||(n[8]=l=>we(F.value.id))},y(F.value.kindling?"Remove kindling":"Mark as Kindling"),1)],64))]),V(F.value)?(d(),u("div",hs,n[21]||(n[21]=[e("b",null,"Waypoint:",-1),ie(" This is a route marker only. It doesnâ€™t count toward completion. ",-1)]))):A("",!0)])],64)):(d(),u("div",gs,[e("div",ys,[n[22]||(n[22]=e("div",{class:"name"},"Route",-1)),e("div",ws,y(Y.value?.label),1)]),e("button",{class:"icon-btn",onClick:he,"aria-label":"Close"},"âœ•")]))])):A("",!0)]),_:1})]))}}),_s=Te(ks,[["__scopeId","data-v-0336f160"]]),Ss={class:"page"},$s={class:"home"},Cs={class:"stack"},xs={id:"seeds",class:"section perf-block"},Ts={class:"details",open:""},Ps={class:"details-body"},Ns={class:"block"},Es={id:"rules",class:"section perf-block"},Ms={class:"details",open:""},As={class:"details-body scroll-safe"},Rs=Ce({__name:"HomePageBefore",setup(s){const a=w([]),r=w([]),f=w([]);return xe(async()=>{const S=await(await fetch("/data/teams.json",{cache:"no-store"})).json();a.value=S.teams||[],r.value=S.races||[],f.value=S.pointsTable||[]}),(P,S)=>(d(),u("div",Ss,[e("div",$s,[e("main",Cs,[_e(dn),e("section",xs,[e("details",Ts,[S[0]||(S[0]=Ae('<summary class="summary" data-v-3f7b8503><div class="sum-left" data-v-3f7b8503><h2 class="sum-title" data-v-3f7b8503>Seed Releases</h2><p class="summary-sub" data-v-3f7b8503>Click to collapse / expand</p></div><span class="chev" data-v-3f7b8503>â–¾</span></summary>',1)),e("div",Ps,[e("div",Ns,[_e(Da)])])])]),e("section",Es,[e("details",Ms,[S[1]||(S[1]=Ae('<summary class="summary" data-v-3f7b8503><div class="sum-left" data-v-3f7b8503><h2 class="sum-title" data-v-3f7b8503>Rules</h2><p class="summary-sub" data-v-3f7b8503>Click to collapse / expand</p></div><span class="chev" data-v-3f7b8503>â–¾</span></summary>',1)),e("div",As,[_e(It)])])])]),_e(_s,{"map-src":"/img/testt2.jpg","data-url":"/data/dlcChecks.json"})])]))}}),Is=Te(Rs,[["__scopeId","data-v-3f7b8503"]]);export{Is as default};
