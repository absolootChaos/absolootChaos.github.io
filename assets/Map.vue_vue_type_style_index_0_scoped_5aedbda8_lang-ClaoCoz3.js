var v=function(){return v=Object.assign||function(t){for(var r,i=1,d=arguments.length;i<d;i++){r=arguments[i];for(var h in r)Object.prototype.hasOwnProperty.call(r,h)&&(t[h]=r[h])}return t},v.apply(this,arguments)};typeof window<"u"&&(window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),typeof window.CustomEvent!="function"&&(window.CustomEvent=function(t,r){r=r||{bubbles:!1,cancelable:!1,detail:null};var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,r.bubbles,r.cancelable,r.detail),i}));var pt=typeof document<"u"&&!!document.documentMode,Q;function gt(){return Q||(Q=document.createElement("div").style)}var it=["webkit","moz","ms"],D={};function rt(e){if(D[e])return D[e];var t=gt();if(e in t)return D[e]=e;for(var r=e[0].toUpperCase()+e.slice(1),i=it.length;i--;){var d="".concat(it[i]).concat(r);if(d in t)return D[e]=d}}function G(e,t){return parseFloat(t[rt(e)])||0}function L(e,t,r){r===void 0&&(r=window.getComputedStyle(e));var i=t==="border"?"Width":"";return{left:G("".concat(t,"Left").concat(i),r),right:G("".concat(t,"Right").concat(i),r),top:G("".concat(t,"Top").concat(i),r),bottom:G("".concat(t,"Bottom").concat(i),r)}}function E(e,t,r){e.style[rt(t)]=r}function yt(e,t){var r=rt("transform");E(e,"transition","".concat(r," ").concat(t.duration,"ms ").concat(t.easing))}function wt(e,t,r){var i=t.x,d=t.y,h=t.scale,p=t.isSVG;if(E(e,"transform","scale(".concat(h,") translate(").concat(i,"px, ").concat(d,"px)")),p&&pt){var g=window.getComputedStyle(e).getPropertyValue("transform");e.setAttribute("transform",g)}}function _(e){var t=e.parentNode,r=window.getComputedStyle(e),i=window.getComputedStyle(t),d=e.getBoundingClientRect(),h=t.getBoundingClientRect();return{elem:{style:r,width:d.width,height:d.height,top:d.top,bottom:d.bottom,left:d.left,right:d.right,margin:L(e,"margin",r),border:L(e,"border",r)},parent:{style:i,width:h.width,height:h.height,top:h.top,bottom:h.bottom,left:h.left,right:h.right,padding:L(t,"padding",i),border:L(t,"border",i)}}}var S={down:"mousedown",move:"mousemove",up:"mouseup mouseleave"};typeof window<"u"&&(typeof window.PointerEvent=="function"?S={down:"pointerdown",move:"pointermove",up:"pointerup pointerleave pointercancel"}:typeof window.TouchEvent=="function"&&(S={down:"touchstart",move:"touchmove",up:"touchend touchcancel"}));function k(e,t,r,i){S[e].split(" ").forEach(function(d){t.addEventListener(d,r,i)})}function H(e,t,r){S[e].split(" ").forEach(function(i){t.removeEventListener(i,r)})}function ct(e,t){for(var r=e.length;r--;)if(e[r].pointerId===t.pointerId)return r;return-1}function et(e,t){var r;if(t.touches){r=0;for(var i=0,d=t.touches;i<d.length;i++){var h=d[i];h.pointerId=r++,et(e,h)}return}r=ct(e,t),r>-1&&e.splice(r,1),e.push(t)}function mt(e,t){if(t.touches){for(;e.length;)e.pop();return}var r=ct(e,t);r>-1&&e.splice(r,1)}function ut(e){e=e.slice(0);for(var t=e.pop(),r;r=e.pop();)t={clientX:(r.clientX-t.clientX)/2+t.clientX,clientY:(r.clientY-t.clientY)/2+t.clientY};return t}function tt(e){if(e.length<2)return 0;var t=e[0],r=e[1];return Math.sqrt(Math.pow(Math.abs(r.clientX-t.clientX),2)+Math.pow(Math.abs(r.clientY-t.clientY),2))}function bt(e){for(var t=e;t&&t.parentNode;){if(t.parentNode===document)return!0;t=t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}return!1}function xt(e){return(e.getAttribute("class")||"").trim()}function Et(e,t){return e.nodeType===1&&" ".concat(xt(e)," ").indexOf(" ".concat(t," "))>-1}function Pt(e,t){for(var r=e;r!=null;r=r.parentNode)if(Et(r,t.excludeClass)||t.exclude.indexOf(r)>-1)return!0;return!1}var Mt=/^http:[\w\.\/]+svg$/;function St(e){return Mt.test(e.namespaceURI)&&e.nodeName.toLowerCase()!=="svg"}function At(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}var ft={animate:!1,canvas:!1,cursor:"move",disablePan:!1,disableZoom:!1,disableXAxis:!1,disableYAxis:!1,duration:200,easing:"ease-in-out",exclude:[],excludeClass:"panzoom-exclude",handleStartEvent:function(e){e.preventDefault(),e.stopPropagation()},maxScale:4,minScale:.125,overflow:"hidden",panOnlyWhenZoomed:!1,pinchAndPan:!1,relative:!1,setTransform:wt,startX:0,startY:0,startScale:1,step:.3,touchAction:"none"};function Ct(e,t){if(!e)throw new Error("Panzoom requires an element as an argument");if(e.nodeType!==1)throw new Error("Panzoom requires an element with a nodeType of 1");if(!bt(e))throw new Error("Panzoom should be called on elements that have been attached to the DOM");t=v(v({},ft),t);var r=St(e),i=e.parentNode;i.style.overflow=t.overflow,i.style.userSelect="none",i.style.touchAction=t.touchAction,(t.canvas?i:e).style.cursor=t.cursor,e.style.userSelect="none",e.style.touchAction=t.touchAction,E(e,"transformOrigin",typeof t.origin=="string"?t.origin:r?"0 0":"50% 50%");function d(){i.style.overflow="",i.style.userSelect="",i.style.touchAction="",i.style.cursor="",e.style.cursor="",e.style.userSelect="",e.style.touchAction="",E(e,"transformOrigin","")}function h(n){n===void 0&&(n={});for(var a in n)n.hasOwnProperty(a)&&(t[a]=n[a]);(n.hasOwnProperty("cursor")||n.hasOwnProperty("canvas"))&&(i.style.cursor=e.style.cursor="",(t.canvas?i:e).style.cursor=t.cursor),n.hasOwnProperty("overflow")&&(i.style.overflow=n.overflow),n.hasOwnProperty("touchAction")&&(i.style.touchAction=n.touchAction,e.style.touchAction=n.touchAction)}var p=0,g=0,s=1,A=!1;Y(t.startScale,{animate:!1,force:!0}),setTimeout(function(){B(t.startX,t.startY,{animate:!1,force:!0})});function C(n,a,c){if(!c.silent){var f=new CustomEvent(n,{detail:a});e.dispatchEvent(f)}}function R(n,a,c){var f={x:p,y:g,scale:s,isSVG:r,originalEvent:c};return requestAnimationFrame(function(){typeof a.animate=="boolean"&&(a.animate?yt(e,a):E(e,"transition","none")),a.setTransform(e,f,a),C(n,f,a),C("panzoomchange",f,a)}),f}function V(n,a,c,f){var o=v(v({},t),f),l={x:p,y:g,opts:o};if(!f?.force&&(o.disablePan||o.panOnlyWhenZoomed&&s===o.startScale))return l;if(n=parseFloat(n),a=parseFloat(a),o.disableXAxis||(l.x=(o.relative?p:0)+n),o.disableYAxis||(l.y=(o.relative?g:0)+a),o.contain){var u=_(e),y=u.elem.width/s,m=u.elem.height/s,P=y*c,M=m*c,b=(P-y)/2,x=(M-m)/2;if(o.contain==="inside"){var $=(-u.elem.margin.left-u.parent.padding.left+b)/c,j=(u.parent.width-P-u.parent.padding.left-u.elem.margin.left-u.parent.border.left-u.parent.border.right+b)/c;l.x=Math.max(Math.min(l.x,j),$);var J=(-u.elem.margin.top-u.parent.padding.top+x)/c,K=(u.parent.height-M-u.parent.padding.top-u.elem.margin.top-u.parent.border.top-u.parent.border.bottom+x)/c;l.y=Math.max(Math.min(l.y,K),J)}else if(o.contain==="outside"){var $=(-(P-u.parent.width)-u.parent.padding.left-u.parent.border.left-u.parent.border.right+b)/c,j=(b-u.parent.padding.left)/c;l.x=Math.max(Math.min(l.x,j),$);var J=(-(M-u.parent.height)-u.parent.padding.top-u.parent.border.top-u.parent.border.bottom+x)/c,K=(x-u.parent.padding.top)/c;l.y=Math.max(Math.min(l.y,K),J)}}return o.roundPixels&&(l.x=Math.round(l.x),l.y=Math.round(l.y)),l}function X(n,a){var c=v(v({},t),a),f={scale:s,opts:c};if(!a?.force&&c.disableZoom)return f;var o=t.minScale,l=t.maxScale;if(c.contain){var u=_(e),y=u.elem.width/s,m=u.elem.height/s;if(y>1&&m>1){var P=u.parent.width-u.parent.border.left-u.parent.border.right,M=u.parent.height-u.parent.border.top-u.parent.border.bottom,b=P/y,x=M/m;t.contain==="inside"?l=Math.min(l,b,x):t.contain==="outside"&&(o=Math.max(o,b,x))}}return f.scale=Math.min(Math.max(n,o),l),f}function B(n,a,c,f){var o=V(n,a,s,c);return p!==o.x||g!==o.y?(p=o.x,g=o.y,R("panzoompan",o.opts,f)):{x:p,y:g,scale:s,isSVG:r,originalEvent:f}}function Y(n,a,c){var f=X(n,a),o=f.opts;if(!(!a?.force&&o.disableZoom)){n=f.scale;var l=p,u=g;if(o.focal){var y=o.focal;l=(y.x/n-y.x/s+p*n)/n,u=(y.y/n-y.y/s+g*n)/n}var m=V(l,u,n,{relative:!1,force:!0});return p=m.x,g=m.y,s=n,R("panzoomzoom",o,c)}}function nt(n,a){var c=v(v(v({},t),{animate:!0}),a);return Y(s*Math.exp((n?1:-1)*c.step),c)}function lt(n){return nt(!0,n)}function st(n){return nt(!1,n)}function Z(n,a,c,f){var o=_(e),l={width:o.parent.width-o.parent.padding.left-o.parent.padding.right-o.parent.border.left-o.parent.border.right,height:o.parent.height-o.parent.padding.top-o.parent.padding.bottom-o.parent.border.top-o.parent.border.bottom},u=a.clientX-o.parent.left-o.parent.padding.left-o.parent.border.left-o.elem.margin.left,y=a.clientY-o.parent.top-o.parent.padding.top-o.parent.border.top-o.elem.margin.top;r||(u-=o.elem.width/s/2,y-=o.elem.height/s/2);var m={x:u/l.width*(l.width*n),y:y/l.height*(l.height*n)};return Y(n,v(v({},c),{animate:!1,focal:m}),f)}function dt(n,a){n.preventDefault();var c=v(v(v({},t),a),{animate:!1}),f=n.deltaY===0&&n.deltaX?n.deltaX:n.deltaY,o=f<0?1:-1,l=X(s*Math.exp(o*c.step/3),c).scale;return Z(l,n,c,n)}function vt(n){var a=v(v(v({},t),{animate:!0,force:!0}),n);s=X(a.startScale,a).scale;var c=V(a.startX,a.startY,s,a);return p=c.x,g=c.y,R("panzoomreset",a)}var N,z,O,T,at,I,w=[];function q(n){if(!Pt(n.target,t)){et(w,n),A=!0,t.handleStartEvent(n),N=p,z=g,C("panzoomstart",{x:p,y:g,scale:s,isSVG:r,originalEvent:n},t);var a=ut(w);O=a.clientX,T=a.clientY,at=s,I=tt(w)}}function F(n){if(!(!A||N===void 0||z===void 0||O===void 0||T===void 0)){et(w,n);var a=ut(w),c=w.length>1,f=s;if(c){I===0&&(I=tt(w));var o=tt(w)-I;f=X(o*t.step/80+at).scale,Z(f,a,{animate:!1},n)}(!c||t.pinchAndPan)&&B(N+(a.clientX-O)/f,z+(a.clientY-T)/f,{animate:!1},n)}}function U(n){w.length===1&&C("panzoomend",{x:p,y:g,scale:s,isSVG:r,originalEvent:n},t),mt(w,n),A&&(A=!1,N=z=O=T=void 0)}var W=!1;function ot(){W||(W=!0,k("down",t.canvas?i:e,q),k("move",document,F,{passive:!0}),k("up",document,U,{passive:!0}))}function ht(){W=!1,H("down",t.canvas?i:e,q),H("move",document,F),H("up",document,U)}return t.noBind||ot(),{bind:ot,destroy:ht,eventNames:S,getPan:function(){return{x:p,y:g}},getScale:function(){return s},getOptions:function(){return At(t)},handleDown:q,handleMove:F,handleUp:U,pan:B,reset:vt,resetStyle:d,setOptions:h,setStyle:function(n,a){return E(e,n,a)},zoom:Y,zoomIn:lt,zoomOut:st,zoomToPoint:Z,zoomWithWheel:dt}}Ct.defaultOptions=ft;export{Ct as P};
