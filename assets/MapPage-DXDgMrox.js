import{d as Ze,c as T,r as M,q as be,a as Be,o as Je,s as vt,b as h,f as u,l as Te,i as R,h as me,t as S,k as ue,v as ft,u as Me,F as H,g as ce,x as Ue,e as pt,n as Ee,T as ht,m as Qe,w as qe,y as We,j as g,_ as He,z as gt,R as mt}from"./index-M0XtB5Y1.js";var I=function(){return I=Object.assign||function(t){for(var r,c=1,k=arguments.length;c<k;c++){r=arguments[c];for(var E in r)Object.prototype.hasOwnProperty.call(r,E)&&(t[E]=r[E])}return t},I.apply(this,arguments)};typeof window<"u"&&(window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),typeof window.CustomEvent!="function"&&(window.CustomEvent=function(t,r){r=r||{bubbles:!1,cancelable:!1,detail:null};var c=document.createEvent("CustomEvent");return c.initCustomEvent(t,r.bubbles,r.cancelable,r.detail),c}));var yt=typeof document<"u"&&!!document.documentMode,Pe;function wt(){return Pe||(Pe=document.createElement("div").style)}var Ge=["webkit","moz","ms"],xe={};function $e(n){if(xe[n])return xe[n];var t=wt();if(n in t)return xe[n]=n;for(var r=n[0].toUpperCase()+n.slice(1),c=Ge.length;c--;){var k="".concat(Ge[c]).concat(r);if(k in t)return xe[n]=k}}function _e(n,t){return parseFloat(t[$e(n)])||0}function Ce(n,t,r){r===void 0&&(r=window.getComputedStyle(n));var c=t==="border"?"Width":"";return{left:_e("".concat(t,"Left").concat(c),r),right:_e("".concat(t,"Right").concat(c),r),top:_e("".concat(t,"Top").concat(c),r),bottom:_e("".concat(t,"Bottom").concat(c),r)}}function de(n,t,r){n.style[$e(t)]=r}function kt(n,t){var r=$e("transform");de(n,"transition","".concat(r," ").concat(t.duration,"ms ").concat(t.easing))}function bt(n,t,r){var c=t.x,k=t.y,E=t.scale,N=t.isSVG;if(de(n,"transform","scale(".concat(E,") translate(").concat(c,"px, ").concat(k,"px)")),N&&yt){var P=window.getComputedStyle(n).getPropertyValue("transform");n.setAttribute("transform",P)}}function Ae(n){var t=n.parentNode,r=window.getComputedStyle(n),c=window.getComputedStyle(t),k=n.getBoundingClientRect(),E=t.getBoundingClientRect();return{elem:{style:r,width:k.width,height:k.height,top:k.top,bottom:k.bottom,left:k.left,right:k.right,margin:Ce(n,"margin",r),border:Ce(n,"border",r)},parent:{style:c,width:E.width,height:E.height,top:E.top,bottom:E.bottom,left:E.left,right:E.right,padding:Ce(t,"padding",c),border:Ce(t,"border",c)}}}var ye={down:"mousedown",move:"mousemove",up:"mouseup mouseleave"};typeof window<"u"&&(typeof window.PointerEvent=="function"?ye={down:"pointerdown",move:"pointermove",up:"pointerup pointerleave pointercancel"}:typeof window.TouchEvent=="function"&&(ye={down:"touchstart",move:"touchmove",up:"touchend touchcancel"}));function Ie(n,t,r,c){ye[n].split(" ").forEach(function(k){t.addEventListener(k,r,c)})}function Ne(n,t,r){ye[n].split(" ").forEach(function(c){t.removeEventListener(c,r)})}function et(n,t){for(var r=n.length;r--;)if(n[r].pointerId===t.pointerId)return r;return-1}function Re(n,t){var r;if(t.touches){r=0;for(var c=0,k=t.touches;c<k.length;c++){var E=k[c];E.pointerId=r++,Re(n,E)}return}r=et(n,t),r>-1&&n.splice(r,1),n.push(t)}function xt(n,t){if(t.touches){for(;n.length;)n.pop();return}var r=et(n,t);r>-1&&n.splice(r,1)}function Ke(n){n=n.slice(0);for(var t=n.pop(),r;r=n.pop();)t={clientX:(r.clientX-t.clientX)/2+t.clientX,clientY:(r.clientY-t.clientY)/2+t.clientY};return t}function ze(n){if(n.length<2)return 0;var t=n[0],r=n[1];return Math.sqrt(Math.pow(Math.abs(r.clientX-t.clientX),2)+Math.pow(Math.abs(r.clientY-t.clientY),2))}function _t(n){for(var t=n;t&&t.parentNode;){if(t.parentNode===document)return!0;t=t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}return!1}function Ct(n){return(n.getAttribute("class")||"").trim()}function St(n,t){return n.nodeType===1&&" ".concat(Ct(n)," ").indexOf(" ".concat(t," "))>-1}function Mt(n,t){for(var r=n;r!=null;r=r.parentNode)if(St(r,t.excludeClass)||t.exclude.indexOf(r)>-1)return!0;return!1}var Et=/^http:[\w\.\/]+svg$/;function Pt(n){return Et.test(n.namespaceURI)&&n.nodeName.toLowerCase()!=="svg"}function At(n){var t={};for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r]);return t}var tt={animate:!1,canvas:!1,cursor:"move",disablePan:!1,disableZoom:!1,disableXAxis:!1,disableYAxis:!1,duration:200,easing:"ease-in-out",exclude:[],excludeClass:"panzoom-exclude",handleStartEvent:function(n){n.preventDefault(),n.stopPropagation()},maxScale:4,minScale:.125,overflow:"hidden",panOnlyWhenZoomed:!1,pinchAndPan:!1,relative:!1,setTransform:bt,startX:0,startY:0,startScale:1,step:.3,touchAction:"none"};function nt(n,t){if(!n)throw new Error("Panzoom requires an element as an argument");if(n.nodeType!==1)throw new Error("Panzoom requires an element with a nodeType of 1");if(!_t(n))throw new Error("Panzoom should be called on elements that have been attached to the DOM");t=I(I({},tt),t);var r=Pt(n),c=n.parentNode;c.style.overflow=t.overflow,c.style.userSelect="none",c.style.touchAction=t.touchAction,(t.canvas?c:n).style.cursor=t.cursor,n.style.userSelect="none",n.style.touchAction=t.touchAction,de(n,"transformOrigin",typeof t.origin=="string"?t.origin:r?"0 0":"50% 50%");function k(){c.style.overflow="",c.style.userSelect="",c.style.touchAction="",c.style.cursor="",n.style.cursor="",n.style.userSelect="",n.style.touchAction="",de(n,"transformOrigin","")}function E(l){l===void 0&&(l={});for(var i in l)l.hasOwnProperty(i)&&(t[i]=l[i]);(l.hasOwnProperty("cursor")||l.hasOwnProperty("canvas"))&&(c.style.cursor=n.style.cursor="",(t.canvas?c:n).style.cursor=t.cursor),l.hasOwnProperty("overflow")&&(c.style.overflow=l.overflow),l.hasOwnProperty("touchAction")&&(c.style.touchAction=l.touchAction,n.style.touchAction=l.touchAction)}var N=0,P=0,w=1,L=!1;se(t.startScale,{animate:!1,force:!0}),setTimeout(function(){ve(t.startX,t.startY,{animate:!1,force:!0})});function V(l,i,f){if(!f.silent){var m=new CustomEvent(l,{detail:i});n.dispatchEvent(m)}}function U(l,i,f){var m={x:N,y:P,scale:w,isSVG:r,originalEvent:f};return requestAnimationFrame(function(){typeof i.animate=="boolean"&&(i.animate?kt(n,i):de(n,"transition","none")),i.setTransform(n,m,i),V(l,m,i),V("panzoomchange",m,i)}),m}function F(l,i,f,m){var s=I(I({},t),m),y={x:N,y:P,opts:s};if(!m?.force&&(s.disablePan||s.panOnlyWhenZoomed&&w===s.startScale))return y;if(l=parseFloat(l),i=parseFloat(i),s.disableXAxis||(y.x=(s.relative?N:0)+l),s.disableYAxis||(y.y=(s.relative?P:0)+i),s.contain){var d=Ae(n),$=d.elem.width/w,A=d.elem.height/w,re=$*f,le=A*f,x=(re-$)/2,X=(le-A)/2;if(s.contain==="inside"){var ie=(-d.elem.margin.left-d.parent.padding.left+x)/f,fe=(d.parent.width-re-d.parent.padding.left-d.elem.margin.left-d.parent.border.left-d.parent.border.right+x)/f;y.x=Math.max(Math.min(y.x,fe),ie);var pe=(-d.elem.margin.top-d.parent.padding.top+X)/f,he=(d.parent.height-le-d.parent.padding.top-d.elem.margin.top-d.parent.border.top-d.parent.border.bottom+X)/f;y.y=Math.max(Math.min(y.y,he),pe)}else if(s.contain==="outside"){var ie=(-(re-d.parent.width)-d.parent.padding.left-d.parent.border.left-d.parent.border.right+x)/f,fe=(x-d.parent.padding.left)/f;y.x=Math.max(Math.min(y.x,fe),ie);var pe=(-(le-d.parent.height)-d.parent.padding.top-d.parent.border.top-d.parent.border.bottom+X)/f,he=(X-d.parent.padding.top)/f;y.y=Math.max(Math.min(y.y,he),pe)}}return s.roundPixels&&(y.x=Math.round(y.x),y.y=Math.round(y.y)),y}function z(l,i){var f=I(I({},t),i),m={scale:w,opts:f};if(!i?.force&&f.disableZoom)return m;var s=t.minScale,y=t.maxScale;if(f.contain){var d=Ae(n),$=d.elem.width/w,A=d.elem.height/w;if($>1&&A>1){var re=d.parent.width-d.parent.border.left-d.parent.border.right,le=d.parent.height-d.parent.border.top-d.parent.border.bottom,x=re/$,X=le/A;t.contain==="inside"?y=Math.min(y,x,X):t.contain==="outside"&&(s=Math.max(s,x,X))}}return m.scale=Math.min(Math.max(l,s),y),m}function ve(l,i,f,m){var s=F(l,i,w,f);return N!==s.x||P!==s.y?(N=s.x,P=s.y,U("panzoompan",s.opts,m)):{x:N,y:P,scale:w,isSVG:r,originalEvent:m}}function se(l,i,f){var m=z(l,i),s=m.opts;if(!(!i?.force&&s.disableZoom)){l=m.scale;var y=N,d=P;if(s.focal){var $=s.focal;y=($.x/l-$.x/w+N*l)/l,d=($.y/l-$.y/w+P*l)/l}var A=F(y,d,l,{relative:!1,force:!0});return N=A.x,P=A.y,w=l,U("panzoomzoom",s,f)}}function q(l,i){var f=I(I(I({},t),{animate:!0}),i);return se(w*Math.exp((l?1:-1)*f.step),f)}function we(l){return q(!0,l)}function ee(l){return q(!1,l)}function te(l,i,f,m){var s=Ae(n),y={width:s.parent.width-s.parent.padding.left-s.parent.padding.right-s.parent.border.left-s.parent.border.right,height:s.parent.height-s.parent.padding.top-s.parent.padding.bottom-s.parent.border.top-s.parent.border.bottom},d=i.clientX-s.parent.left-s.parent.padding.left-s.parent.border.left-s.elem.margin.left,$=i.clientY-s.parent.top-s.parent.padding.top-s.parent.border.top-s.elem.margin.top;r||(d-=s.elem.width/w/2,$-=s.elem.height/w/2);var A={x:d/y.width*(y.width*l),y:$/y.height*(y.height*l)};return se(l,I(I({},f),{animate:!1,focal:A}),m)}function ne(l,i){l.preventDefault();var f=I(I(I({},t),i),{animate:!1}),m=l.deltaY===0&&l.deltaX?l.deltaX:l.deltaY,s=m<0?1:-1,y=z(w*Math.exp(s*f.step/3),f).scale;return te(y,l,f,l)}function b(l){var i=I(I(I({},t),{animate:!0,force:!0}),l);w=z(i.startScale,i).scale;var f=F(i.startX,i.startY,w,i);return N=f.x,P=f.y,U("panzoomreset",i)}var Y,W,G,K,ae,Z,p=[];function D(l){if(!Mt(l.target,t)){Re(p,l),L=!0,t.handleStartEvent(l),Y=N,W=P,V("panzoomstart",{x:N,y:P,scale:w,isSVG:r,originalEvent:l},t);var i=Ke(p);G=i.clientX,K=i.clientY,ae=w,Z=ze(p)}}function j(l){if(!(!L||Y===void 0||W===void 0||G===void 0||K===void 0)){Re(p,l);var i=Ke(p),f=p.length>1,m=w;if(f){Z===0&&(Z=ze(p));var s=ze(p)-Z;m=z(s*t.step/80+ae).scale,te(m,i,{animate:!1},l)}(!f||t.pinchAndPan)&&ve(Y+(i.clientX-G)/m,W+(i.clientY-K)/m,{animate:!1},l)}}function oe(l){p.length===1&&V("panzoomend",{x:N,y:P,scale:w,isSVG:r,originalEvent:l},t),xt(p,l),L&&(L=!1,Y=W=G=K=void 0)}var _=!1;function ke(){_||(_=!0,Ie("down",t.canvas?c:n,D),Ie("move",document,j,{passive:!0}),Ie("up",document,oe,{passive:!0}))}function J(){_=!1,Ne("down",t.canvas?c:n,D),Ne("move",document,j),Ne("up",document,oe)}return t.noBind||ke(),{bind:ke,destroy:J,eventNames:ye,getPan:function(){return{x:N,y:P}},getScale:function(){return w},getOptions:function(){return At(t)},handleDown:D,handleMove:j,handleUp:oe,pan:ve,reset:b,resetStyle:k,setOptions:E,setStyle:function(l,i){return de(n,l,i)},zoom:se,zoomIn:we,zoomOut:ee,zoomToPoint:te,zoomWithWheel:ne}}nt.defaultOptions=tt;const It={class:"map-wrap"},Nt={class:"topbar"},zt={class:"left"},Ot={class:"title"},Tt={class:"title-text"},Rt={class:"sub"},$t={key:0},Yt={class:"controls"},Lt=["value"],Vt=["value"],Xt=["value"],Ft={class:"toggle"},Dt={key:0,class:"placement-hint"},jt={key:0,class:"copied"},Bt={class:"right"},Ut={key:0,class:"status"},qt={key:1,class:"status error"},Wt={class:"panzoom-root"},Gt=["src"],Kt={key:0,class:"route-svg",viewBox:"0 0 100 100",preserveAspectRatio:"none"},Zt=["points"],Jt=["title"],Qt=["onClick","title"],Ht={class:"legend"},en={key:0,class:"legend-row"},tn={key:0,class:"drawer"},nn={key:0,class:"route-panel"},an={class:"route-head"},on={class:"route-sub"},rn={class:"toggle route-toggle"},ln={class:"route-list"},sn=["onClick"],un={class:"idx"},cn={class:"name"},dn={key:0,class:"locmark"},vn={key:0,class:"loc"},fn={key:1,class:"tag kindling"},pn={key:2,class:"tag done"},hn={class:"drawer-head"},gn={class:"drawer-title"},mn={class:"name"},yn={key:0,class:"loc"},wn={class:"drawer-body"},kn={class:"pill-row"},bn={key:0,class:"pill"},xn={key:0,class:"desc"},_n={class:"actions"},Cn={key:1,class:"note"},Sn={key:2,class:"drawer-head"},Mn={class:"drawer-title"},En={class:"loc"},Oe=1,Pn="/data/dlcRoutes.json",An=Ze({__name:"Map",props:{mapSrc:{},dataUrl:{default:"/data/dlcChecks.json"},checks:{default:void 0},startPlacementMode:{type:Boolean,default:!1},categoryOrder:{default:void 0},maxScale:{default:5},minScale:{default:.4},startShrink:{default:1},fitPadding:{default:0},startYOffset:{default:650}},setup(n){const t=n,r=T(()=>{const o=(t.mapSrc||"map").replace(/[^a-z0-9_-]/gi,"_");return`dlcChecksProgress:v${Oe}:${o}:${w.value}`});function c(){try{const o=localStorage.getItem(r.value);if(!o)return null;const e=JSON.parse(o);return!e||e.v!==Oe||!e.checks?null:e}catch{return null}}function k(){try{const o={v:Oe,updatedAt:Date.now(),checks:Object.fromEntries(b.value.filter(e=>!_(e)).map(e=>[e.id,{done:!!e.done,kindling:!!e.kindling}]))};localStorage.setItem(r.value,JSON.stringify(o))}catch{}}function E(){const o=c();if(!o)return;const e=o.checks;b.value=b.value.map(a=>{if(_(a))return a;const v=e[a.id];return v?{...a,done:!!v.done,kindling:!!v.kindling}:a})}function N(){try{localStorage.removeItem(r.value)}catch{}b.value=b.value.map(o=>_(o)?o:{...o,done:!1,kindling:!1})}const P=M([{id:"all",label:"All Checks",url:""},{id:"defaultSeed",label:"Default Checks",url:"/data/dlcSeeds/default.json"},{id:"seed1",label:"Seed 1 Checklist",url:"/data/dlcSeeds/seed1.json"},{id:"seed2",label:"Seed 2 Checklist",url:"/data/dlcSeeds/seed2.json"},{id:"seed3",label:"Seed 3 Checklist",url:"/data/dlcSeeds/seed3.json"},{id:"seed4",label:"Seed 4 Checklist",url:"/data/dlcSeeds/seed4.json"}]),w=M("defaultSeed"),L=M(null),V=M(!0),U=M([]),F=M(""),z=T(()=>U.value.find(o=>o.routeId===F.value)??null),ve=T(()=>z.value?V.value?A.value:A.value.filter(o=>!_(o)):[]),se=T(()=>!z.value||!V.value?[]:A.value.filter(o=>_(o))),q=M(null),we=M(null),ee=M(null),te=M(!1),ne=M(""),b=M([]),Y=M(null),W=M(!!t.startPlacementMode),G=M(""),K=M(""),ae=M("all"),Z=M(!0);let p=null,D=null,j=0;const oe=M(null);function _(o){return(o.category||"").toLowerCase()==="location"}async function ke(){ne.value="",te.value=!0;try{if(t.checks?.length){b.value=t.checks.map(v=>({...v,done:!!v.done,kindling:!!v.kindling}));return}const o=await fetch(t.dataUrl,{cache:"no-store"});if(!o.ok)throw new Error(`Failed to load checks: ${o.status}`);const e=await o.json(),a=Array.isArray(e)?e:e.checks;b.value=(a||[]).map(v=>({...v,done:!!v.done,kindling:!!v.kindling})),E()}catch(o){ne.value=o?.message??"Failed to load checks."}finally{te.value=!1}}be(w,async()=>{await i(),Y.value=null,E()});let J=null;function l(){J&&window.clearTimeout(J),J=window.setTimeout(()=>{J=null,k()},250)}be(b,()=>{l()},{deep:!0}),Be(()=>{J&&window.clearTimeout(J)});async function i(){L.value=null;const o=P.value.find(e=>e.id===w.value);if(!(!o||!o.url))try{const e=await fetch(o.url,{cache:"no-store"});if(!e.ok)throw new Error(`Failed to load seed list: ${e.status}`);L.value=await e.json()}catch(e){ne.value=e?.message??"Failed to load seed list."}}async function f(){try{const o=await fetch(Pn,{cache:"no-store"});if(!o.ok)throw new Error(`Failed to load routes: ${o.status}`);const e=await o.json();U.value=Array.isArray(e)?e:e.routes}catch(o){console.warn(o?.message??"Failed to load routes"),U.value=[]}}const m=T(()=>{if(w.value==="all"||!L.value)return b.value;const o=new Set(L.value.checkIds),e=b.value.filter(O=>o.has(O.id)),a=L.value.defaultCount;if(!a||e.length<=a)return e;const v=new Map(e.map(O=>[O.id,O]));return L.value.checkIds.map(O=>v.get(O)).filter(Boolean).slice(0,a)}),s=T(()=>m.value.filter(o=>!_(o)));T(()=>m.value.filter(o=>_(o)));const y=T(()=>{const o=new Set;for(const v of s.value)v.category&&o.add(v.category);const e=Array.from(o).sort((v,C)=>v.localeCompare(C));if(!t.categoryOrder?.length)return e;const a=t.categoryOrder.filter(v=>o.has(v));for(const v of e)a.includes(v)||a.push(v);return a}),d=T(()=>{const o=K.value.trim().toLowerCase();return s.value.filter(e=>!Z.value&&(e.done||e.kindling)||ae.value!=="all"&&(e.category||"")!==ae.value?!1:o?`${e.name} ${e.locationName??""} ${e.description??""}`.toLowerCase().includes(o):!0)}),$=T(()=>s.value.filter(o=>o.done||o.kindling).length),A=T(()=>{const o=z.value;if(!o)return[];const e=new Map(b.value.map(a=>[a.id,a]));return o.checkIds.map(a=>e.get(a)).filter(Boolean)}),re=T(()=>A.value.map(o=>`${o.x},${o.y}`).join(" ")),le=T(()=>z.value?A.value.filter(o=>!_(o)):d.value);T(()=>z.value?A.value.filter(o=>_(o)):[]);const x=T(()=>Y.value?b.value.find(o=>o.id===Y.value)??null:null);function X(o){Y.value=o}function ie(){Y.value=null,F.value=""}function fe(o){const e=b.value.findIndex(a=>a.id===o);e!==-1&&(_(b.value[e])||(b.value[e]={...b.value[e],done:!b.value[e].done}))}function pe(o){const e=b.value.findIndex(v=>v.id===o);if(e===-1||_(b.value[e]))return;const a=b.value[e];b.value[e]={...a,kindling:!a.kindling}}const he=T(()=>s.value.filter(o=>!!o.kindling).length);function at(o){const e=ee.value;if(!e)return null;const a=e.getBoundingClientRect(),v=(o.clientX-a.left)/a.width,C=(o.clientY-a.top)/a.height,O=Math.max(0,Math.min(100,v*100)),B=Math.max(0,Math.min(100,C*100));return{x:O,y:B}}async function ot(o){if(!W.value)return;const e=at(o);if(!e)return;const a=`{ "x": ${e.x.toFixed(2)}, "y": ${e.y.toFixed(2)} }`;G.value=a;try{await navigator.clipboard.writeText(a)}catch{}}function Se(o){const e=q.value,a=ee.value;if(!p||!e||!a||o!==j)return;const v=e.getBoundingClientRect(),C=a.getBoundingClientRect();let O=0,B=0;if(C.left>v.left&&(O=v.left-C.left),C.right<v.right&&(O=v.right-C.right),C.top>v.top&&(B=v.top-C.top),C.bottom<v.bottom&&(B=v.bottom-C.bottom),O!==0||B!==0){const ge=p.getPan();p.pan(ge.x+O,ge.y+B,{relative:!1,force:!0,animate:!1})}}function Ye(o=!0,e=!0){const a=ee.value,v=q.value;if(!p||!a||!v)return;const C=++j,O=a.naturalWidth||1,B=a.naturalHeight||1,ge=v.getBoundingClientRect(),Ve=Math.max(1,ge.width),Xe=Math.max(1,ge.height),st=Math.max(Ve/O,Xe/B);p.pan(0,0,{relative:!1,force:!0,animate:!1});const Fe=p.getScale();Fe!==1&&p.zoom(1/Fe,{force:!0,animate:!1}),p.zoom(st/p.getScale(),{force:!0,animate:!1});const De=p.getScale(),it=O*De,ut=B*De;let ct=(Ve-it)/2,dt=(Xe-ut)/2;p.pan(Math.round(ct),Math.round(dt),{relative:!1,force:!0,animate:!1}),requestAnimationFrame(()=>{if(C!==j)return;Se(C);const je=t.startYOffset??0;if(je){const Q=p.getPan();p.pan(Q.x,Q.y-je,{relative:!1,force:!0,animate:!1})}requestAnimationFrame(()=>{C===j&&(Se(C),requestAnimationFrame(()=>{if(C===j){if(Se(C),e){const Q=p.getPan();oe.value={scale:p.getScale(),x:Q.x,y:Q.y}}if(o){const Q=p.getPan();p.pan(Q.x,Q.y,{relative:!1,force:!0,animate:!0})}}}))})})}function rt(){if(!p||!oe.value){Ye(!0,!0);return}const o=oe.value,e=o.scale/p.getScale();p.zoom(e,{force:!0,animate:!0}),p.pan(o.x,o.y,{relative:!1,force:!0,animate:!0})}function lt(){const o=we.value,e=q.value;!o||!e||(Le(),p=nt(o,{maxScale:t.maxScale,minScale:t.minScale,contain:void 0,cursor:"grab"}),D=a=>{p&&(a.ctrlKey||(a.preventDefault(),p.zoomWithWheel(a)))},e.addEventListener("wheel",D,{passive:!1}))}function Le(){const o=q.value;if(o&&D&&o.removeEventListener("wheel",D),D=null,p){try{p.destroy()}catch{}p=null}}return be(w,async()=>{await i(),Y.value=null}),be(F,()=>{Y.value=null}),Je(async()=>{await ke(),await i(),await f(),await vt(),lt();const o=ee.value;if(!o)return;const e=()=>{Ye(!1,!0),requestAnimationFrame(()=>rt())};o.complete?e():o.addEventListener("load",e,{once:!0})}),Be(()=>{Le()}),(o,e)=>(g(),h("div",It,[u("div",Nt,[u("div",zt,[u("div",Ot,[e[10]||(e[10]=u("span",{class:"spark"},"üß≠",-1)),u("div",Tt,[e[9]||(e[9]=u("div",{class:"h1"},"DLC Checks Map (WIP)",-1)),u("div",Rt,[me(S($.value)+"/"+S(s.value.length)+" completed ‚Ä¢ üî• "+S(he.value)+" Kindling Shards ",1),d.value.length!==s.value.length?(g(),h("span",$t," ‚Ä¢ showing "+S(d.value.length),1)):R("",!0)])])]),u("div",Yt,[ue(u("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>K.value=a),class:"input",type:"text",placeholder:"Search checks‚Ä¶"},null,512),[[ft,K.value]]),ue(u("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>w.value=a),class:"select"},[(g(!0),h(H,null,ce(P.value,a=>(g(),h("option",{key:a.id,value:a.id},S(a.label),9,Lt))),128))],512),[[Me,w.value]]),ue(u("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>ae.value=a),class:"select"},[e[11]||(e[11]=u("option",{value:"all"},"All categories",-1)),(g(!0),h(H,null,ce(y.value,a=>(g(),h("option",{key:a,value:a},S(a),9,Vt))),128))],512),[[Me,ae.value]]),u("button",{class:"btn",onClick:N,title:"Clear saved progress"}," Clear Progress "),ue(u("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>F.value=a),class:"select"},[e[12]||(e[12]=u("option",{value:""},"No route (show all)",-1)),(g(!0),h(H,null,ce(U.value,a=>(g(),h("option",{key:a.routeId,value:a.routeId},S(a.label),9,Xt))),128))],512),[[Me,F.value]]),u("label",Ft,[ue(u("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>Z.value=a),type:"checkbox"},null,512),[[Ue,Z.value]]),e[13]||(e[13]=u("span",null,"Show completed",-1))])]),W.value?(g(),h("div",Dt,[e[14]||(e[14]=u("b",null,"Placement mode:",-1)),e[15]||(e[15]=me(" click the map to copy coordinates. ",-1)),G.value?(g(),h("span",jt,"Copied: "+S(G.value),1)):R("",!0)])):R("",!0)]),u("div",Bt,[te.value?(g(),h("div",Ut,"Loading checks‚Ä¶")):ne.value?(g(),h("div",qt,"‚ùå "+S(ne.value),1)):R("",!0)])]),u("div",{ref_key:"containerEl",ref:q,class:Ee(["map-viewport",{placing:W.value}]),onClick:ot},[u("div",Wt,[u("div",{ref_key:"panzoomEl",ref:we,class:"map-layer"},[u("img",{ref_key:"imgEl",ref:ee,class:"map-img",src:o.mapSrc,alt:"DLC map"},null,8,Gt),z.value&&A.value.length>=2?(g(),h("svg",Kt,[u("polyline",{class:"route-line",points:re.value},null,8,Zt)])):R("",!0),(g(!0),h(H,null,ce(se.value,a=>(g(),h("button",{key:a.id,class:"waypoint",style:We({left:a.x+"%",top:a.y+"%"}),onClick:e[5]||(e[5]=qe(()=>{},["stop"])),title:a.name}," ‚õ≥ ",12,Jt))),128)),(g(!0),h(H,null,ce(le.value,a=>(g(),h("button",{key:a.id,class:Ee(["pin",{done:!!a.done,kindling:!!a.kindling,selected:Y.value===a.id,inRoute:!!z.value}]),style:We({left:a.x+"%",top:a.y+"%"}),onClick:qe(v=>X(a.id),["stop"]),title:a.locationName?`${a.name} ‚Äî ${a.locationName}`:a.name},e[16]||(e[16]=[u("span",{class:"dot"},null,-1)]),14,Qt))),128))],512)]),u("div",Ht,[e[18]||(e[18]=pt('<div class="legend-row" data-v-4435d29a><span class="legend-dot" data-v-4435d29a></span><span data-v-4435d29a>Incomplete</span></div><div class="legend-row" data-v-4435d29a><span class="legend-dot done" data-v-4435d29a></span><span data-v-4435d29a>Completed</span></div><div class="legend-row" data-v-4435d29a><span class="legend-dot kindling" data-v-4435d29a></span><span data-v-4435d29a>Kindling</span></div>',3)),z.value&&V.value?(g(),h("div",en,e[17]||(e[17]=[u("span",{class:"legend-flag"},"‚õ≥",-1),u("span",null,"Route waypoint",-1)]))):R("",!0)])],2),Te(ht,{name:"slide"},{default:Qe(()=>[x.value||z.value?(g(),h("aside",tn,[z.value?(g(),h("div",nn,[u("div",an,[e[20]||(e[20]=u("div",{class:"route-title"},"Route",-1)),u("div",on,S(z.value.label)+" ‚Ä¢ "+S(A.value.length)+" items",1),u("label",rn,[ue(u("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>V.value=a),type:"checkbox"},null,512),[[Ue,V.value]]),e[19]||(e[19]=u("span",null,"Show locations",-1))])]),u("ol",ln,[(g(!0),h(H,null,ce(ve.value,(a,v)=>(g(),h("li",{key:a.id,class:Ee(["route-item",{isLocation:_(a),active:Y.value===a.id}]),onClick:C=>X(a.id)},[u("span",un,S(v+1),1),u("span",cn,[_(a)?(g(),h("span",dn,"‚õ≥")):R("",!0),me(" "+S(a.name),1)]),a.locationName?(g(),h("span",vn,"‚Äî "+S(a.locationName),1)):R("",!0),!_(a)&&a.kindling?(g(),h("span",fn,"Kindling")):!_(a)&&a.done?(g(),h("span",pn,"Done")):R("",!0)],10,sn))),128))])])):R("",!0),x.value?(g(),h(H,{key:1},[u("div",hn,[u("div",gn,[u("div",mn,S(x.value.name),1),x.value.locationName?(g(),h("div",yn,S(x.value.locationName),1)):R("",!0)]),u("button",{class:"icon-btn",onClick:ie,"aria-label":"Close"},"‚úï")]),u("div",wn,[u("div",kn,[x.value.category?(g(),h("span",bn,S(x.value.category),1)):R("",!0)]),x.value.description?(g(),h("p",xn,S(x.value.description),1)):R("",!0),u("div",_n,[_(x.value)?R("",!0):(g(),h(H,{key:0},[u("button",{class:"btn primary",onClick:e[7]||(e[7]=a=>fe(x.value.id))},S(x.value.done?"Mark incomplete":"Mark complete"),1),u("button",{class:"btn kindling",onClick:e[8]||(e[8]=a=>pe(x.value.id))},S(x.value.kindling?"Remove kindling":"Mark as Kindling"),1)],64))]),_(x.value)?(g(),h("div",Cn,e[21]||(e[21]=[u("b",null,"Waypoint:",-1),me(" This is a route marker only. It doesn‚Äôt count toward completion. ",-1)]))):R("",!0)])],64)):(g(),h("div",Sn,[u("div",Mn,[e[22]||(e[22]=u("div",{class:"name"},"Route",-1)),u("div",En,S(z.value?.label),1)]),u("button",{class:"icon-btn",onClick:ie,"aria-label":"Close"},"‚úï")]))])):R("",!0)]),_:1})]))}}),In=He(An,[["__scopeId","data-v-4435d29a"]]),Nn={class:"map-page"},zn={class:"topbar"},On={key:0,class:"loading"},Tn={key:1,class:"map-wrap"},Rn=Ze({__name:"MapPage",setup(n){const t=M([]),r=M(!0);return Je(async()=>{try{const c=await fetch("/data/dlcChecks.json",{cache:"no-store"});t.value=await c.json()}finally{r.value=!1}}),(c,k)=>(g(),h("div",Nn,[u("header",zn,[Te(gt(mt),{to:"/",class:"home-btn"},{default:Qe(()=>k[0]||(k[0]=[me(" ‚Üê Home ",-1)])),_:1,__:[0]})]),r.value?(g(),h("div",On,"Loading map‚Ä¶")):(g(),h("div",Tn,[Te(In,{class:"map-component","map-src":"/img/testt2.jpg","data-url":"/data/dlcChecks.json"})]))]))}}),Yn=He(Rn,[["__scopeId","data-v-7a47ff6a"]]);export{Yn as default};
